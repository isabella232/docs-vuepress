(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{107:function(e,t,a){e.exports=a.p+"assets/img/fig0406.1cdc2641.png"},356:function(e,t,a){e.exports=a.p+"assets/img/fig0404.b0f5fe88.png"},357:function(e,t,a){e.exports=a.p+"assets/img/fig0405.0616a5f2.png"},358:function(e,t,a){e.exports=a.p+"assets/img/fig0407.08bad986.png"},359:function(e,t,a){e.exports=a.p+"assets/img/job-ref-node-filter-override.678024a5.png"},360:function(e,t,a){e.exports=a.p+"assets/img/copy-file-step.2b0dc199.png"},361:function(e,t,a){e.exports=a.p+"assets/img/local-command-step.331c14c6.png"},362:function(e,t,a){e.exports=a.p+"assets/img/data-node-step.3f46a9bf.png"},363:function(e,t,a){e.exports=a.p+"assets/img/job_workflow_script_interpreter.3d2b17b2.png"},653:function(e,t,a){"use strict";a.r(t);var s=a(0),o=Object(s.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"builtin-node-steps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#builtin-node-steps","aria-hidden":"true"}},[e._v("#")]),e._v(" Builtin Node Steps")]),e._v(" "),s("h3",{attrs:{id:"command-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#command-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Command step")]),e._v(" "),s("p",[e._v("Use the command step to call system commands. Enter any command string you\nwould type at the terminal on the remote hosts.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(356),alt:"Command step type"}}),s("figcaption",[e._v("Command step type")])]),e._v(" "),s("h3",{attrs:{id:"script-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#script-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Script step")]),e._v(" "),s("p",[e._v("Execute the supplied shell script content. Optionally, can pass an\nargument to the script specified in the lower text field.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(357),alt:"Script step type"}}),s("figcaption",[e._v("Script step type")])]),e._v(" "),s("h3",{attrs:{id:"script-file-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#script-file-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Script file step")]),e._v(" "),s("p",[e._v("Executes the script file local to the sever to the filtered Node\nset. Arguments can be passed to the script by specifying them in the\nlower text field.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(107),alt:"Script file step type"}}),s("figcaption",[e._v("Script file step type")])]),e._v(" "),s("h3",{attrs:{id:"script-url-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#script-url-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Script URL step")]),e._v(" "),s("p",[e._v("Downloads a script from a URL, and executes it to the filtered Node\nset. Arguments can be passed to the script by specifying them in the\nlower text field.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(107),alt:"Script URL step type"}}),s("figcaption",[e._v("Script URL step type")])]),e._v(" "),s("p",[e._v("The URL can contain [Context Variables](/manual/job-workflows.md#context-variables] that will be expanded at runtime.")]),e._v(" "),s("h3",{attrs:{id:"job-reference-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#job-reference-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Job reference step")]),e._v(" "),s("p",[e._v("To call another saved Job, create a Job Reference step. Enter the name\nof the Job and its group.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(358),alt:"Job reference step type"}}),s("figcaption",[e._v("Job reference step type")])]),e._v(" "),s("p",[e._v('The Job Reference form provides a Job browser to make it easier to\nselect from the existing set of saved Jobs.\nClick the "Choose A Job..." link and navigate to the desired Job.')]),e._v(" "),s("p",[e._v("Finally, if the Job defines Options, you can specify them in the\ncommandline arguments text field and can include variable expansion to pass\nany input options for the current job. Format:")]),e._v(" "),s("pre",[s("code",[e._v("-optname <value> -optname <value> ...\n")])]),e._v(" "),s("p",[e._v("The format for specifying options is exactly the same as you would pass\nto the "),s("code",[e._v("run")]),e._v(" commandline tool, and you can substitute values of input\noptions to the current job. For example:")]),e._v(" "),s("pre",[s("code",[e._v("-opt1 something -opt2 ${option.opt2}\n")])]),e._v(" "),s("p",[e._v('This would set the value "something" for the Job\'s "opt1" option, and then pass\nthe "opt2" option directly from the top-level job to the Job reference.')]),e._v(" "),s("p",[e._v("This is similar to calling the other Job with [run]:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("filter-options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" -j group/jobname -- -opt1 something -opt2 somethingelse\n")])])]),s("p",[e._v('If the Job has required Options that are not specified on the arguments line,\nthen a "defaultValue" of that option will be used if it is defined. If a\nrequired option does not have a default value, then the execution will fail\nbecause the option is not specified.')]),e._v(" "),s("p",[e._v("Job References can be run as either "),s("em",[e._v("Node Steps")]),e._v(" or "),s("em",[e._v("Workflow Steps")]),e._v(" (see "),s("a",{attrs:{href:"#workflow-steps"}},[e._v("Workflow Steps : Types of Steps")]),e._v(").\nWhen you choose to use a Job Reference as a "),s("em",[e._v("Node Step")]),e._v(", you can use the Node context variables within the arguments string to the Job.")]),e._v(" "),s("h4",{attrs:{id:"overriding-node-filters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overriding-node-filters","aria-hidden":"true"}},[e._v("#")]),e._v(" Overriding Node Filters")]),e._v(" "),s("p",[e._v('You can override the Node Filters used in the referenced Job. Click the "Override Node Filters?" button to expand the Node Filter area.')]),e._v(" "),s("figure",[s("img",{attrs:{src:a(359),alt:"Job Reference Node Filter Override"}}),s("figcaption",[e._v("Job Reference Node Filter Override")])]),e._v(" "),s("p",[e._v('Enter a new filter in the "Node Filter" input field to preview the matched nodes.')]),e._v(" "),s("p",[e._v("Once you enter a new filter, you can modify the other aspects for the Node Dispatching used by the Job Reference:")]),e._v(" "),s("ul",[s("li",[e._v("Thread Count")]),e._v(" "),s("li",[e._v("Node failure behavior")]),e._v(" "),s("li",[e._v("Node Rank attribute")]),e._v(" "),s("li",[e._v("Node Rank order")])]),e._v(" "),s("h3",{attrs:{id:"copy-file-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#copy-file-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Copy File step")]),e._v(" "),s("p",[e._v("Copy a file to a destination on a remote node.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(360),alt:"Copy File Step"}}),s("figcaption",[e._v("Copy File Step")])]),e._v(" "),s("h4",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),s("dl",[s("dt",[e._v("Source Path")]),e._v(" "),s("dd",[e._v("Path on the rundeck server for the file or base directory (recursive/wildcard search).")]),e._v(" "),s("dt",[e._v("Destination Path")]),e._v(" "),s("dd",[e._v("Path on the remote node for the file destination. If the path ends with a /, the same filename as the source will be used.")]),e._v(" "),s("dt",[e._v("Pattern")]),e._v(" "),s("dd",[e._v("Wildcard pattern (optional). E.g: "),s("code",[e._v("**/*.txt")])]),e._v(" "),s("dt",[e._v("Recursive copy")]),e._v(" "),s("dd",[e._v("Recursively copy source dir, or matched files and dirs to the destination path.")]),e._v(" "),s("dt",[e._v("Print transfer information")]),e._v(" "),s("dd",[e._v("Log information about the file copy")])]),e._v(" "),s("h3",{attrs:{id:"local-command-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#local-command-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Local Command step")]),e._v(" "),s("p",[e._v("Run a command locally on the server")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(361),alt:"Local Command Step"}}),s("figcaption",[e._v("Local Command Step")])]),e._v(" "),s("h4",{attrs:{id:"configuration-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),s("dl",[s("dt",[e._v("Command")]),e._v(" "),s("dd",[e._v("The command (runs locally)")])]),e._v(" "),s("h3",{attrs:{id:"data-node-step"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#data-node-step","aria-hidden":"true"}},[e._v("#")]),e._v(" Data Node step")]),e._v(" "),s("p",[e._v("Produce data values for a node.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(362),alt:"Data Node Step"}}),s("figcaption",[e._v("Data Node Step")])]),e._v(" "),s("h4",{attrs:{id:"configuration-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),s("dl",[s("dt",[e._v("Data")]),e._v(" "),s("dd",[e._v("Properties formatted data to set for the current node")]),e._v(" "),s("dt",[e._v("Format")]),e._v(" "),s("dd",[e._v("Format for the data. One of: "),s("code",[e._v("properties")]),e._v(", "),s("code",[e._v("json")]),e._v(", or "),s("code",[e._v("yaml")])])]),e._v(" "),s("h2",{attrs:{id:"notes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#notes","aria-hidden":"true"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),s("h3",{attrs:{id:"advanced-script-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#advanced-script-options","aria-hidden":"true"}},[e._v("#")]),e._v(" Advanced Script options")]),e._v(" "),s("p",[e._v("For "),s("a",{attrs:{href:"#script-step"}},[e._v("Script steps")]),e._v(", "),s("a",{attrs:{href:"#script-file-step"}},[e._v("Script file steps")]),e._v(", and "),s("a",{attrs:{href:"#script-url-step"}},[e._v("Script URL steps")]),e._v(", you can specify an optional "),s("em",[e._v("Invocation")]),e._v(" string to declare how the script should be executed.")]),e._v(" "),s("p",[e._v('Click on the "Advanced" link to reveal the input.')]),e._v(" "),s("figure",[s("img",{attrs:{src:a(363),alt:"Advanced Script Settings"}}),s("figcaption",[e._v("Advanced Script Settings")])]),e._v(" "),s("p",[e._v("Enter a command that will be used as the "),s("em",[e._v("invocation")]),e._v(" to run the script, by including "),s("code",[e._v("${scriptfile}")]),e._v(" to define where the resulting file will appear in the invocation command. For example, you can execute the script using "),s("code",[e._v("sudo")]),e._v(" by entering:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" -u username "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${scriptfile}")]),e._v("\n")])])]),s("p",[e._v("This will then allow your script to make use of [Sudo authentication](/administration/projects/node-execution/ssh.md#secondary-sudo-password-authentication].")]),e._v(" "),s("p",[e._v("The effective commandline for your script will become:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" -u username "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("scriptfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" arguments "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),s("p",[e._v('If necessary, you can check the "Quote arguments to script invocation string?" checkbox, which will then quote both the scriptfile and arguments before passing to the invocation command:')]),e._v(" "),s("pre",[s("code",[e._v('[invocation string] "[scriptfile] arguments ..."\n')])]),e._v(" "),s("h3",{attrs:{id:"changing-the-file-extension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#changing-the-file-extension","aria-hidden":"true"}},[e._v("#")]),e._v(" Changing the File extension")]),e._v(" "),s("p",[e._v("You can also change the file extension set on the temporary file when it is invoked. This might be necessary if your command expects a file with a certain extension.")]),e._v(" "),s("p",[e._v('Set the "File Extension" field to the desired extension. The '),s("code",[e._v(".")]),e._v(" is optional, e.g. "),s("code",[e._v(".ps")]),e._v(" or "),s("code",[e._v("sh")]),e._v(". The default is determined by the type of target node. Unix uses "),s("code",[e._v(".sh")]),e._v(" and Windows uses "),s("code",[e._v(".bat")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"quoting-arguments-to-steps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quoting-arguments-to-steps","aria-hidden":"true"}},[e._v("#")]),e._v(" Quoting arguments to steps")]),e._v(" "),s("p",[e._v("When you define a "),s("a",{attrs:{href:"#command-step"}},[e._v("Command")]),e._v(" or arguments to any Script or Job reference step, your arguments are interpreted as a space-separated sequence of strings. If you need to use spaces or quotes within the argument, here are some rules for quoting arguments:")]),e._v(" "),s("ul",[s("li",[e._v("If you have an argument with a space character, you can use either double or single quotes:\n"),s("ul",[s("li",[s("code",[e._v('"my argument"')]),e._v(": interpreted as "),s("code",[e._v("my argument")])]),e._v(" "),s("li",[s("code",[e._v("'my argument'")]),e._v(": interpreted as "),s("code",[e._v("my argument")])])])]),e._v(" "),s("li",[e._v("If you need to embed quotes within a quoted argument, you can wrap it in the opposite kind of quote (double or single):\n"),s("ul",[s("li",[s("code",[e._v("'\"double quotes\"'")]),e._v(": interpreted as "),s("code",[e._v('"double quotes"')])]),e._v(" "),s("li",[s("code",[e._v("\"'single quotes'\"")]),e._v(": interpreted as "),s("code",[e._v("'single quotes'")])])])]),e._v(" "),s("li",[e._v("Or use doubled-up quote characters\n"),s("ul",[s("li",[s("code",[e._v('"""double quotes"""')]),e._v(": interpreted as "),s("code",[e._v('"double quotes"')])]),e._v(" "),s("li",[s("code",[e._v("'''single quotes'''")]),e._v(": interpreted as "),s("code",[e._v("'single quotes'")])])])])])])},[],!1,null,null,null);t.default=o.exports}}]);