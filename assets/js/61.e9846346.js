(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{430:function(e,t,r){"use strict";r.r(t);var n=r(0),a=Object(n.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"rundeck-enterprise-config-property-encryption"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rundeck-enterprise-config-property-encryption","aria-hidden":"true"}},[e._v("#")]),e._v(" Rundeck Enterprise Config Property Encryption")]),e._v(" "),r("p",[e._v("All Rundeck Enterprise bundles come with a feature that allows you to encrypt the values in the rundeck-config.properties file.")]),e._v(" "),r("h3",{attrs:{id:"approach"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#approach","aria-hidden":"true"}},[e._v("#")]),e._v(" Approach")]),e._v(" "),r("p",[e._v("To use encrypted properties in Rundeck you will have a master password that will be used to encrypt and decrypt the other passwords you wish to use in the rundeck-config.properties file.")]),e._v(" "),r("p",[e._v("For instance you might want to encrypt the bind password to your LDAP server. Let's say your LDAP bind password is "),r("code",[e._v("binder123")]),e._v(". You will need a master password to encrypt this value. We will use "),r("code",[e._v("1PwdToBindThem$")]),e._v(" for the master password.")]),e._v(" "),r("h3",{attrs:{id:"encrypting-property-values"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#encrypting-property-values","aria-hidden":"true"}},[e._v("#")]),e._v(" Encrypting Property values")]),e._v(" "),r("p",[e._v("Rundeck Enterprise has a feature to allow you to generate encrypted passwords using the Jasypt encryption library. The following instructions show how to encrypt a password with this utility from the command line.")]),e._v(" "),r("p",[e._v("cd into the directory where your rundeck.war is located\nrun: "),r("code",[e._v("java -jar rundeck.war --encryptpwd Jasypt")]),e._v("\nYou will receive prompts for information that look like the following:")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Required values are marked with: *\nEncrypter Config (The base property name used in RD_ENCRYPTION_ or rd.encryption. ('default' is the default value)):\n\n*Master Password (Master password used to encrypt the value):\n1PwdToBindThem$\n*Value To Encrypt (The text you want to encrypt):\nbinder123\n\n==ENCRYPTED OUTPUT==\nencrypted: bbnJmDtx82/NOeUc9ahULGVAH+RdSLG5\n")])])]),r("p",[e._v("You will take the "),r("code",[e._v("encrypted:")]),e._v(" value from the ENCRYPTED OUTPUT section which will have a value that looks like: "),r("code",[e._v("bbnJmDtx82/NOeUc9ahULGVAH+RdSLG5")]),e._v(" (note that it will not be this value) and use it in your rundeck-config.properties file like this:\n"),r("code",[e._v("rundeck.security.ldap.bindPassword=ENC(bbnJmDtx82/NOeUc9ahULGVAH+RdSLG5)")])]),e._v(" "),r("h3",{attrs:{id:"decrypting-rundeck-config-properties"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#decrypting-rundeck-config-properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Decrypting rundeck-config.properties")]),e._v(" "),r("p",[e._v("To decrypt the encrypted properties in your rundeck-config.properties file you will need to set the environment variable "),r("code",[e._v("RUNDECK_PROP_DECRYPTER_PWD")]),e._v(" with the value of your master password before starting Rundeck.")]),e._v(" "),r("p",[e._v("In our example we would do: "),r("code",[e._v("export RUNDECK_PROP_DECRYPTER_PWD=1PwdToBindThem$")]),e._v("\nthen we would start our Rundeck Enterprise installation. After the application has completed the bootstrap process and is responding to requests, the environment variable can be unset for security purposes.")]),e._v(" "),r("h3",{attrs:{id:"advanced-usage"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#advanced-usage","aria-hidden":"true"}},[e._v("#")]),e._v(" Advanced Usage")]),e._v(" "),r("p",[e._v("If you wish to customize the algorithm, provider, or keyObtentions the Jasypt encryptor will use to encrypt the password, you can do this by passing those\nvalues as system properties when you launch the encryption utility.")]),e._v(" "),r("p",[e._v("For example, if you wish to use the "),r("code",[e._v("PBEWITHSHA256AND256BITAES-CBC-BC")]),e._v(" algorithm to encrypt your password, you could do it like this:")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("> java -jar -Drd.encryption.STRONG.algorithm=PBEWITHSHA256AND256BITAES-CBC-BC rundeckpro-cluster-3.0.0-SNAPSHOT.war --encryptpwd Jasypt\nRequired values are marked with: *\nEncrypter Config (The base property name used in RD_ENCRYPTION_ or rd.encryption. ('default' is the default value)):\nSTRONG\n*Master Password (Master password used to encrypt the value):\n1PwdToBindThem$\n*Value To Encrypt (The text you want to encrypt):\nbinder123\n\n==ENCRYPTED OUTPUT==\nencrypted: i67e4g3jAUML0KCh+KwmnqX9lCflThMuu6CXm++VSqU=\n")])])]),r("p",[e._v("Notice we are setting an rd.encryption config with the name STRONG. Then when prompted for the "),r("code",[e._v("Encrypter Config")]),e._v(" by the tool we type in the value "),r("code",[e._v("STRONG")]),e._v(".\nThis sets the encryptor to use the algorithm passed by "),r("code",[e._v("rd.encryption.STRONG.algorithm")]),e._v(" instead of the default configuration which uses a different algorithm.")]),e._v(" "),r("p",[e._v("To use your custom encrypted password when you start Rundeck, it is very important to ensure that the same system properties you used at encrypt time\nare set at launch time. Otherwise Rundeck will use the default decryptor settings which will not match your customized settings, and startup will fail.")]),e._v(" "),r("p",[e._v("To start Rundeck with the settings in our example, the startup string would be something like:")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("java -jar -Drd.encryption.STRONG.algorithm=PBEWITHSHA256AND256BITAES-CBC-BC -Drundeck.encrypter.config.name=STRONG rundeckpro-cluster-3.0.0-SNAPSHOT.war\n")])])]),r("p",[e._v("If you would rather use environment variables to set the encryption settings you can use:\n"),r("code",[e._v("RUNDECK_PROP_DECRYPTER_CONFIG")]),e._v(" to set the config to use\nand config settings can be supplied like:\n"),r("code",[e._v("RD_ENCRYPTION_{your config name}_ALGORITHM")])]),e._v(" "),r("p",[e._v("For the example above, these would be:\n"),r("code",[e._v("export RUNDECK_PROP_DECRYPTER_CONFIG=STRONG")]),e._v(" "),r("code",[e._v("export RD_ENCRYPTION_STRONG_ALGORITHM=PBEWITHSHA256AND256BITAES-CBC-BC")])])])},[],!1,null,null,null);t.default=a.exports}}]);