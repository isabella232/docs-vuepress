(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{642:function(e,t,o){"use strict";o.r(t);var a=o(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"rd-acl"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#rd-acl","aria-hidden":"true"}},[e._v("#")]),e._v(" rd-acl")]),e._v(" "),o("h2",{attrs:{id:"name"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#name","aria-hidden":"true"}},[e._v("#")]),e._v(" Name")]),e._v(" "),o("p",[e._v("rd-acl - Test and generate Rundeck ACL policy files.")]),e._v(" "),o("h2",{attrs:{id:"synopsis"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#synopsis","aria-hidden":"true"}},[e._v("#")]),e._v(" Synopsis")]),e._v(" "),o("p",[o("code",[e._v("rd-acl [*command*] [*command options*]...")])]),e._v(" "),o("h2",{attrs:{id:"description"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#description","aria-hidden":"true"}},[e._v("#")]),e._v(" Description")]),e._v(" "),o("p",[e._v("The rd-acl command can test aclpolicy files to check whether they will allow a certain action request or not.")]),e._v(" "),o("p",[e._v("It can also list the results for all defined access tests for a user or group.")]),e._v(" "),o("p",[e._v("It can also generate the correct policy for a certain action. This can be done in a semi-interactive mode\nby specifying each "),o("a",{attrs:{href:"#common-options"}},[e._v("Common Option")]),e._v(" in turn, allowing it to prompt you with a set\nof next possible options.")]),e._v(" "),o("p",[e._v("It can also take as input the output from the Rundeck AUDIT log, and generate ACL policy definitions\nto allow any disallowed actions.")]),e._v(" "),o("p",[e._v("It can also validate one or more files.")]),e._v(" "),o("p",[e._v("The tool works in these "),o("em",[e._v("COMMAND")]),e._v(" modes:")]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("test")])]),e._v(" "),o("dd",[e._v("test one or more aclpolicy files to determine if an action would be allowed.")]),e._v(" "),o("dt",[o("code",[e._v("list")])]),e._v(" "),o("dd",[e._v("list all access tests for a user or group for one or more aclpolicy files.")]),e._v(" "),o("dt",[o("code",[e._v("create")])]),e._v(" "),o("dd",[e._v("generate the correct ACL policy YAML definition for a specific action, or to allow a previously rejected\naction as logged in the Rundeck AUDIT log.")]),e._v(" "),o("dt",[o("code",[e._v("validate")])]),e._v(" "),o("dd",[e._v("Validate a file or directory of files, and print messages about problems with the files.")])]),e._v(" "),o("h2",{attrs:{id:"related"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#related","aria-hidden":"true"}},[e._v("#")]),e._v(" Related")]),e._v(" "),o("p",[e._v("See:")]),e._v(" "),o("ul",[o("li",[o("router-link",{attrs:{to:"/manpages/man5/aclpolicy-v10.html"}},[e._v("ACL Policy syntax")])],1),e._v(" "),o("li",[o("router-link",{attrs:{to:"/administration/security/authorization.html"}},[e._v("Access Control Policy")])],1)]),e._v(" "),o("h2",{attrs:{id:"options"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#options","aria-hidden":"true"}},[e._v("#")]),e._v(" Options")]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-h, --help")])]),e._v(" "),o("dd",[e._v("Print usage message.")]),e._v(" "),o("dt",[o("code",[e._v("-v, --verbose")])]),e._v(" "),o("dd",[e._v("Run verbosely.")])]),e._v(" "),o("h3",{attrs:{id:"test-and-validate-command-options"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#test-and-validate-command-options","aria-hidden":"true"}},[e._v("#")]),e._v(" Test and Validate Command Options")]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("test")]),e._v(" and "),o("code",[e._v("validate")]),e._v(" commands take these input options.")]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-d, --dir <dir>")])]),e._v(" "),o("dd",[e._v("Directory. Load all policy files in the specified directory.")]),e._v(" "),o("dt",[o("code",[e._v("-f, --file <file>")])]),e._v(" "),o("dd",[e._v("File path. Load the specified aclpolicy file.")]),e._v(" "),o("dt",[o("code",[e._v("-v")])]),e._v(" "),o("dd",[e._v("If the tested action is not allowed, print the necessary ACL policy to allow it (as per the "),o("code",[e._v("create")]),e._v(" action.)")])]),e._v(" "),o("p",[e._v("One of "),o("code",[e._v("--dir")]),e._v(" or "),o("code",[e._v("--file")]),e._v(" is required for the "),o("code",[e._v("test")]),e._v(' command. If the rdeck.base system property is defined, then\nthe Rundeck "etc" dir will be used as for the '),o("code",[e._v("--dir")]),e._v(" option by default.")]),e._v(" "),o("p",[e._v("In addition,\nthe "),o("code",[e._v("test")]),e._v(" command also takes the "),o("a",{attrs:{href:"#common-options"}},[e._v("Common Options")]),e._v(" and these options:")]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-V, --validate")])]),e._v(" "),o("dd",[e._v("Validate all input files, and exit with non-zero exit code if validation fails. ("),o("code",[e._v("test")]),e._v(" and "),o("code",[e._v("list")]),e._v(" actions.)")])]),e._v(" "),o("h3",{attrs:{id:"create-command-options"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#create-command-options","aria-hidden":"true"}},[e._v("#")]),e._v(" Create Command Options")]),e._v(" "),o("p",[e._v("In addition to the "),o("a",{attrs:{href:"#common-options"}},[e._v("Common Options")]),e._v(", the "),o("code",[e._v("create")]),e._v(" command takes these input options.")]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-i, --input <file | ->")])]),e._v(" "),o("dd",[e._v("Parse the Rundeck AUDIT log input, and for any REJECTED decisions, generate the appropriate aclpolicy\nto allow the action. If the value of the "),o("code",[e._v("--input")]),e._v(" option is "),o("code",[e._v("-")]),e._v(" (dash character), then the STDIN is read.\nIf "),o("code",[e._v("--input")]),e._v(" is used, then the Common Options are ignored.")]),e._v(" "),o("dt",[o("code",[e._v("-r, --regex")])]),e._v(" "),o("dd",[e._v("Match the resource using regular expressions. (create command).")])]),e._v(" "),o("h3",{attrs:{id:"common-options"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#common-options","aria-hidden":"true"}},[e._v("#")]),e._v(" Common Options")]),e._v(" "),o("p",[e._v("These options define the Context, Subject, Action, and Resource,\nwhich are used both to define an Access Request (for the "),o("code",[e._v("test")]),e._v(" command),\nand to define a rule in the ACL Policy (for the "),o("code",[e._v("create")]),e._v(" command).")]),e._v(" "),o("p",[o("strong",[e._v("Context options:")])]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-c,--context <application | project>")])]),e._v(" "),o("dd",[e._v("Context: either 'project' or 'application'. For project context, the "),o("code",[e._v("-p,--project")]),e._v(" option is required.")])]),e._v(" "),o("p",[o("strong",[e._v("Subject options:")])]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-g,--groups <group,...>")])]),e._v(" "),o("dd",[e._v("Subject Groups names. Comma-separated list of user groups to\nvalidate (test command) or for by: clause (create command).")]),e._v(" "),o("dt",[o("code",[e._v("-u,--user <user,...>")])]),e._v(" "),o("dd",[e._v("Subject User name. Comma-separated list of user names to\nvalidate (test command) or for by: clause (create command).")])]),e._v(" "),o("p",[o("strong",[e._v("Action options:")])]),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-a,--allow <action,...>")])]),e._v(" "),o("dd",[e._v("Actions to test are allowed (test command) or to allow (create command).")]),e._v(" "),o("dt",[o("code",[e._v("-D,--deny <action,...>")])]),e._v(" "),o("dd",[e._v("Actions to test are denied (test command) or to deny (create command).")])]),e._v(" "),o("p",[o("strong",[e._v("Resource Options:")])]),e._v(" "),o("p",[e._v('Resources are characterized as either "specific resources", or "resource types"\n(see '),o("router-link",{attrs:{to:"/administration/security/authorization.html#specific-resources-and-resource-types"}},[e._v("Specific Resources and Resource Types")]),e._v('). You can specify "resource types" using the '),o("code",[e._v("-G, --generic <kind>")]),e._v(" option. All specific resources can\nbe specified directly using one of the options, or by type using "),o("code",[e._v("-R, --resource <type>")]),e._v(" in combination with "),o("code",[e._v("-b, --attributes <attr=val ...>")]),e._v(".")],1),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-G,--generic <kind>")])]),e._v(" "),o("dd",[e._v("Generic resource kind.")]),e._v(" "),o("dt",[o("code",[e._v("-R,--resource <type>")])]),e._v(" "),o("dd",[e._v("Resource type name.")]),e._v(" "),o("dt",[o("code",[e._v("-b,--attributes <key=value ...>")])]),e._v(" "),o("dd",[e._v("Attributes for the resource. A sequence of key=value pairs, multiple pairs can follow with a space. Use a value of '?' to see suggestions.")])]),e._v(" "),o("p",[e._v("The following define "),o("router-link",{attrs:{to:"/administration/security/authorization.html#project-scope-resources-and-actions"}},[e._v("Project scope resources")]),e._v(":")],1),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-A,--adhoc")])]),e._v(" "),o("dd",[e._v("Adhoc execution (project context)")]),e._v(" "),o("dt",[o("code",[e._v("-j,--job <group/name>")])]),e._v(" "),o("dd",[e._v("Job group/name. (project context)")]),e._v(" "),o("dt",[o("code",[e._v("-I,--jobUuid <uuid>")])]),e._v(" "),o("dd",[e._v("Job uuid. (project context)")]),e._v(" "),o("dt",[o("code",[e._v("-n,--node <nodename>")])]),e._v(" "),o("dd",[e._v("Node name. (project context)")]),e._v(" "),o("dt",[o("code",[e._v("-t,--tags <tag,..>")])]),e._v(" "),o("dd",[e._v("Node tags. If specified, the resource match will be defined using 'contains'. (project context)")])]),e._v(" "),o("p",[e._v("The following define "),o("router-link",{attrs:{to:"/administration/security/authorization.html#application-scope-resources-and-actions"}},[e._v("Application scope resources")]),e._v(":")],1),e._v(" "),o("dl",[o("dt",[o("code",[e._v("-s,--storage <path/file>")])]),e._v(" "),o("dd",[e._v("Storage path/name. (application context)")]),e._v(" "),o("dt",[o("code",[e._v("-p,--project <project>")])]),e._v(" "),o("dd",[e._v("Name of project, used in project context or for application resource.")])]),e._v(" "),o("h3",{attrs:{id:"list-command-options"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#list-command-options","aria-hidden":"true"}},[e._v("#")]),e._v(" List Command Options")]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("list")]),e._v(" command uses these "),o("a",{attrs:{href:"#test-command-options"}},[e._v("Test Command Options")]),e._v(" to set the aclpolicy files to be evaluated: "),o("code",[e._v("-f,--file")]),e._v(" and "),o("code",[e._v("-d,--dir")]),e._v(".")]),e._v(" "),o("p",[e._v("It also allows these options from the "),o("a",{attrs:{href:"#common-options"}},[e._v("Common Options")]),e._v(":")]),e._v(" "),o("p",[e._v("The Subject options: "),o("code",[e._v("-g,--groups")]),e._v(" and "),o("code",[e._v("-u,--user")])]),e._v(" "),o("p",[e._v("These Resource options:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("-p,--project")]),e._v(" name of a project to test")]),e._v(" "),o("li",[o("code",[e._v("-s,--storage")]),e._v(" Storage path/name")]),e._v(" "),o("li",[o("code",[e._v("-n,--node")]),e._v(" or "),o("code",[e._v("-t,--tags")]),e._v(" name or tags of a node to tests")]),e._v(" "),o("li",[o("code",[e._v("-j,--job")]),e._v(" Job group/name.")]),e._v(" "),o("li",[o("code",[e._v("-I,--jobUuid")]),e._v(" Job uuid.")])]),e._v(" "),o("h2",{attrs:{id:"test-command"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#test-command","aria-hidden":"true"}},[e._v("#")]),e._v(" Test Command")]),e._v(" "),o("p",[e._v("The Test command loads the specified aclpolicy file or directory of files, and evaluates the Access Request defined\nby the "),o("a",{attrs:{href:"#common-options"}},[e._v("Common Options")]),e._v(", and emits the decision of whether the request is allowed, disallowed, or denied.\nIf it is allowed, then "),o("code",[e._v("rd-acl")]),e._v(" will exit with a 0 exit code, otherwise it will exit with 2 exit code.")]),e._v(" "),o("p",[e._v("If the "),o("code",[e._v("-v, --verbose")]),e._v(' flag is enabled, and the decision was not "allowed",\nthen it will additionally automatically invoke the '),o("a",{attrs:{href:"#create-command"}},[e._v("Create Command")]),e._v("\nto generate an aclpolicy definition to allow the requested action.")]),e._v(" "),o("p",[o("strong",[e._v("Note:")]),e._v(' If the decision was "denied", then that indicates a specific DENY rule matches the Access Request.\nA DENY rule that matches will override all ALLOW rules that match.')]),e._v(" "),o("p",[o("em",[e._v("Examples")])]),e._v(" "),o("p",[e._v('Test all aclpolicy files in the Rundeck "etc" directory by default, with an allowed result for '),o("code",[e._v("read")]),e._v(" action:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl test --context application --groups test --storage keys/test1.pem --allow read\nUsing configured Rundeck etc dir: /etc/rundeck\nThe result was: allowed\n")])])]),o("p",[e._v('Test all aclpolicy files in the Rundeck "etc" directory by default, with a rejected result for '),o("code",[e._v("create")]),e._v(" action:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl test --context application --groups test --storage keys/key1.pem --allow create\nUsing configured Rundeck etc dir: /etc/rundeck\nResult: REJECTED\nThe result was: not allowed\n")])])]),o("p",[e._v("The same as above, using the "),o("code",[e._v("--verbose")]),e._v(" flag")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl test --context application --groups test --storage keys/key1.pem --allow create -v\nUsing configured Rundeck etc dir: /etc/rundeck\nResult: REJECTED\nDecision for: res<name:key1.pem, path:keys, type:storage> subject<Username:user Group:test> action<create> env<http://dtolabs.com/rundeck/env/application:rundeck>: authorized: false: REJECTED, reason: REJECTED, evaluations: None\nThe result was: not allowed\nPolicies to allow the requested actions:\n## create or append this to a .aclpolicy file\n---\nfor:\n  storage:\n  - allow: create\n    equals:\n      name: key1.pem\n      path: keys\ndescription: generated\ncontext:\n  application: rundeck\nby:\n  group: test\n")])])]),o("h2",{attrs:{id:"list-command"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#list-command","aria-hidden":"true"}},[e._v("#")]),e._v(" List Command")]),e._v(" "),o("p",[e._v("The List command loads the specified aclpolicy file or directory of files,\nand evaluates all access requests possible for the specified Group or User.\nIt lists the decision of whether each request is allowed, disallowed, or denied.")]),e._v(" "),o("p",[e._v("Further evaluations can be done by supplying some concrete values to identify a Project, Nodes, Jobs, and a Storage path.")]),e._v(" "),o("p",[e._v("If the "),o("code",[e._v("-v, --verbose")]),e._v(' flag is enabled, and the decision was "denied",\nthen it will print the decision details including the file name of the policy rule that denies the request.')]),e._v(" "),o("p",[e._v("In the output, a line starting with "),o("code",[e._v("-")]),e._v(" indicates the action was rejected,\n"),o("code",[e._v("+")]),e._v(" indicates the action was allowed, and "),o("code",[e._v("!")]),e._v(" indicates the action was denied.")]),e._v(" "),o("p",[e._v("The evaluation lines are in the form:")]),e._v(" "),o("pre",[o("code",[e._v("<result> <action>: <resource> [<reason>]\n")])]),e._v(" "),o("p",[o("em",[e._v("Examples")])]),e._v(" "),o("p",[e._v("List results for just a group name:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl list -g api_token_group\nUsing configured Rundeck etc dir: /etc/rundeck\n# Application Context access for group api_token_group\n\n\n(No project (-p) specified, skipping Application context actions for a specific project.)\n\n\n(No storage path (-s) specified, skipping Application context actions for a specific storage path.)\n\n- create: project [REJECTED]\n+ read: system\n- admin: job [REJECTED]\n- admin: user [REJECTED]\n\n(No project (-p) specified, skipping Project context listing.)\n")])])]),o("p",[e._v("Add a "),o("code",[e._v("-p")]),e._v(" to specify a project:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('rd-acl list  -g api_token_group -p test\nUsing configured Rundeck etc dir: /etc/rundeck\n# Application Context access for group api_token_group\n\n- admin: project named "test" [REJECTED]\n- delete_execution: project named "test" [REJECTED]\n- import: project named "test" [REJECTED]\n+ read: project named "test"\n- export: project named "test" [REJECTED]\n- configure: project named "test" [REJECTED]\n- delete: project named "test" [REJECTED]\n\n(No storage path (-s) specified, skipping Application context actions for a specific storage path.)\n\n- create: project [REJECTED]\n+ read: system\n- admin: job [REJECTED]\n- admin: user [REJECTED]\n\n# Project "test" access for group api_token_group\n\n- runAs: Adhoc executions [REJECTED]\n+ kill: Adhoc executions\n+ run: Adhoc executions\n+ read: Adhoc executions\n- killAs: Adhoc executions [REJECTED]\n\n(No job (-j) specified, skipping Project context actions for a specific job.)\n\n\n(No node (-n) or tags (-t) specified, skipping Project context actions for a specific node or node tags.)\n\n+ read: node\n+ refresh: node\n+ create: node\n+ update: node\n+ create: event\n+ read: event\n+ create: job\n+ delete: job\n')])])]),o("p",[e._v("Include "),o("code",[e._v("-j")]),e._v(", "),o("code",[e._v("-n")]),e._v(" and "),o("code",[e._v("-s")]),e._v(":")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('rd-acl list  -g api_token_group -p test -s keys/boingo.pem -j test/job -n mynode\nUsing configured Rundeck etc dir: /etc/rundeck\n# Application Context access for group api_token_group\n\n- configure: project named "test" [REJECTED]\n- import: project named "test" [REJECTED]\n- export: project named "test" [REJECTED]\n- delete: project named "test" [REJECTED]\n- delete_execution: project named "test" [REJECTED]\n+ read: project named "test"\n- admin: project named "test" [REJECTED]\n+ read: storage path "keys/boingo.pem"\n+ update: storage path "keys/boingo.pem"\n! delete: storage path "keys/boingo.pem" [REJECTED_DENIED]\n+ create: storage path "keys/boingo.pem"\n- create: project [REJECTED]\n+ read: system\n- admin: job [REJECTED]\n- admin: user [REJECTED]\n\n# Project "test" access for group api_token_group\n\n- runAs: Adhoc executions [REJECTED]\n- killAs: Adhoc executions [REJECTED]\n+ kill: Adhoc executions\n+ run: Adhoc executions\n+ read: Adhoc executions\n+ run: Job "test/job"\n- runAs: Job "test/job" [REJECTED]\n+ create: Job "test/job"\n+ read: Job "test/job"\n+ delete: Job "test/job"\n+ update: Job "test/job"\n- killAs: Job "test/job" [REJECTED]\n+ kill: Job "test/job"\n+ read: Node "mynode"\n+ run: Node "mynode"\n+ update: node\n+ refresh: node\n+ read: node\n+ create: node\n+ create: event\n+ read: event\n+ delete: job\n+ create: job\n')])])]),o("p",[e._v("Using the "),o("code",[e._v("-v")]),e._v(" verbose flag shows more detail about the REJECTED_DENIED result:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('rd-acl list  -g api_token_group -p test -s keys/boingo.pem -v\nUsing configured Rundeck etc dir: /etc/rundeck\n# Application Context access for group api_token_group\n\n...snip\n! delete: storage path "keys/boingo.pem" [REJECTED_DENIED]\n  REJECTED, reason: REJECTED_DENIED, evaluations:   /etc/rundeck/apitoken.aclpolicy[2][rule: 1: {match={path=(keys|keys/.*)}, allow=*, deny=delete}] for actions: [delete] => REJECTED_DENIED\n...snip\n\n')])])]),o("h2",{attrs:{id:"create-command"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#create-command","aria-hidden":"true"}},[e._v("#")]),e._v(" Create Command")]),e._v(" "),o("p",[e._v("The Create Command can generate ACL Policy YAML definitions based on the "),o("a",{attrs:{href:"#common-options"}},[e._v("Common Options")]),e._v(".\nIt can also parse the output from an authorization evaluation, as logged in the Rundeck AUDIT log, and generate\nthe policy necessary to allow any REJECTED evaluations. In the case of DENIED evaluations, it will still\ngenerate a policy to allow the access request, but note that the DENY rule would need to be removed to\nactually allow the specified action.")]),e._v(" "),o("p",[e._v('Create has a "semi-interactive" behavior. If you enter only some components of the\nSubject, Context, Action and Resource necessary to define a rule, then it will prompt with some possible values\nfor the next component.')]),e._v(" "),o("p",[o("em",[e._v("Examples")])]),e._v(" "),o("p",[e._v("Begin by typing the "),o("code",[e._v("create")]),e._v(" command with no options")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl create\n-c/--context is required.\nChoose one of:\n  -c application\n    Access to projects, users, storage, system info.\n  -c project\n    Access to jobs, nodes, events, within a project.\n")])])]),o("p",[e._v("Add a "),o("code",[e._v("-c project")]),e._v(" option:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl create -c project\n-p/--project is required.\nChoose the name of a project, or .*:\n  -p myproject\n  -p '.*'\n")])])]),o("p",[e._v("Add a "),o("code",[e._v("-p")]),e._v(" option:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl create -c project -p '.*'\n-g/--groups <group,...> or -u/--user <user,...> are required\n  -u user1,user2...\n  -g group1,group2...\n    Groups control access for a set of users, and correspond\n    to authorization roles.\n")])])]),o("p",[e._v("Add a "),o("code",[e._v("-g")]),e._v(" option:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl create -c project -p '.*' -g test\nProject-context resource option is required.\nPossible options:\n  Job: -j/--job <group/name>\n    View, modify, create*, delete*, run, and kill specific jobs.\n    * Create and delete also require additional -G/--generic <kind> level access.\n  Adhoc: -A/--adhoc\n    View, run, and kill adhoc commands.\n  Node: -n/--node <nodename>\n      : -t/--tags <tag,..>\n    View and run on specific nodes by name or tag.\n  Resource: -R/--resource <type>\n    Specify the resource type directly. -b/--attributes <key=value ...> should also be used.\n    resource types in this context:\n    node\n    job\n    adhoc\n  Generic: -G/--generic <kind>\n    Create and delete jobs.\n    View and manage nodes.\n    View events.\n    generic kinds in this context:\n    node\n    event\n    job\n")])])]),o("p",[e._v("Here we see several options to specify the resource. the "),o("code",[e._v("Job")]),e._v(", "),o("code",[e._v("Adhoc")]),e._v(" and "),o("code",[e._v("Node")]),e._v(" options define both\nthe resource type, and some resource attributes. The "),o("code",[e._v("-R")]),e._v(" option can set the resource type directly,\nand then the "),o("code",[e._v("-b")]),e._v(" attributes option can be used to define the attributes.\nOtherwise the "),o("code",[e._v("-G")]),e._v(" option can be used to match a resource kind.")]),e._v(" "),o("p",[e._v("We will specify node tags using "),o("code",[e._v("-t")]),e._v(":")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl create -c project -p '.*' -g test -t prod,www\n-a/--allow or -D/--deny is required.\n  -a action1,action2,...\n  -D action1,action2,...\nPossible actions in this context:\n  *\n  read\n  run\n")])])]),o("p",[e._v("Now we are prompted to choose actions to allow or deny for the rule, and the ACL policy\ndefinition is printed.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rd-acl create -c project -p '.*' -g test -t prod,www -a read -D run\n## create or append this to a .aclpolicy file\n---\nfor:\n  node:\n  - allow: read\n    deny: run\n    contains:\n      tags:\n      - prod\n      - www\ndescription: generated\ncontext:\n  project: .*\nby:\n  group: test\n")])])]),o("h2",{attrs:{id:"validate-command"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#validate-command","aria-hidden":"true"}},[e._v("#")]),e._v(" Validate Command")]),e._v(" "),o("p",[e._v("The Validate command loads the specified aclpolicy file or directory of files, and validates the aclpolicy definitions.\nIt prints any errors found and it will exit with a 0 exit code if no errors are found, otherwise it will exit with 2 exit code.")]),e._v(" "),o("p",[o("em",[e._v("Examples")])]),e._v(" "),o("p",[e._v('Validate all aclpolicy files in the Rundeck "etc" directory by default:')]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("$ rd-acl validate\nUsing configured Rundeck etc dir: /etc/rundeck\nThe validation passed\n")])])]),o("p",[e._v("Validate a specific file:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("$ rd-acl validate -f bad5.aclpolicy\n/Users/greg/rundeck25/bad5.aclpolicy[1]:\n  Context section is not valid: {xproject=asdf}, it should contain only 'application:' or 'project:'\nThe validation failed\n")])])]),o("h2",{attrs:{id:"see-also"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#see-also","aria-hidden":"true"}},[e._v("#")]),e._v(" See Also")]),e._v(" "),o("p",[o("router-link",{attrs:{to:"/manpages/man5/aclpolicy-v10.html"}},[o("code",[e._v("aclpolicy")])])],1),e._v(" "),o("p",[o("router-link",{attrs:{to:"/administration/security/authorization.html"}},[e._v("Access Control Policy")])],1)])},[],!1,null,null,null);t.default=n.exports}}]);