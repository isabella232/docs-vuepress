(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{538:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"email-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#email-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" Email Settings")]),t._v(" "),a("p",[t._v("This document describes how to configure Rundeck for email\nsupport.\nEmail settings are located in the rundeck-config.properties file. Depending on the installer used, the configuration files will be under a base directory:")]),t._v(" "),a("ul",[a("li",[t._v("RPM/DEB: /etc/rundeck/rundeck-config.properties")]),t._v(" "),a("li",[t._v("Launcher: $RDECK_BASE/server/config/rundeck-config.properties")])]),t._v(" "),a("p",[t._v("Refer to the appropriate configuration file paths from "),a("router-link",{attrs:{to:"/administration/configuration/config-file-reference.html#configuration-layout"}},[t._v("Configuration -> Configuration Layout")]),t._v(" to locate the Rundeck configuration paths depending on your install.")],1),t._v(" "),a("h2",{attrs:{id:"smtp-server-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#smtp-server-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" SMTP server settings")]),t._v(" "),a("p",[t._v("By default the plugin assumes an unsecured mail server configured at localhost on port 25.\nYou can specify your own with these settings:")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("grails.mail.host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("localhost")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("grails.mail.port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("25")]),t._v("\n")])])]),a("p",[t._v("To add authentication:")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("grails.mail.username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("user")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("grails.mail.password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("pass")]),t._v("\n")])])]),a("h3",{attrs:{id:"advanced-smtp-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#advanced-smtp-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" Advanced SMTP settings")]),t._v(" "),a("p",[t._v("If you need more advanced configuration (e.g., authenticated and secured over SSL),\nsee the grails Mail plugin configuration:\n"),a("a",{attrs:{href:"https://gpc.github.io/grails-mail/guide/2.%20Configuration.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grails Mail Configuration"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("The caveat for using this is that in our experience it requires using a .groovy formatted configuration file to support the extended configuration properties.")]),t._v(" "),a("p",[t._v("See "),a("router-link",{attrs:{to:"/administration/configuration/config-file-reference.html#groovy-config-format"}},[t._v("Groovy config format")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"notification-email-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notification-email-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" Notification email settings")]),t._v(" "),a("p",[t._v("The URL and From: address used in "),a("router-link",{attrs:{to:"/manual/creating-jobs.html#job-notifications"}},[t._v("Job email notifications")]),t._v(" are managed via the settings located in the rundeck-config.properties file.")],1),t._v(" "),a("p",[t._v("The two properties are:")]),t._v(" "),a("ul",[a("li",[t._v("grails.serverURL")]),t._v(" "),a("li",[t._v("grails.mail.default.from")])]),t._v(" "),a("p",[t._v("Here's an example:")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("grails.serverURL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("https://node.fully.qualified.domain.name:4443")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("grails.mail.default.from")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("deployer@domain.com")]),t._v("\n")])])]),a("h3",{attrs:{id:"custom-email-templates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-email-templates","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom Email Templates")]),t._v(" "),a("p",[t._v("You can define these properties to customize the email notifications. Each property can be defined for a specific Trigger, or for the general case. Available triggers are: "),a("code",[t._v("success")]),t._v(","),a("code",[t._v("failure")]),t._v(", and "),a("code",[t._v("start")]),t._v(". In addition, you can have custom settings for a project and job name combination as well:")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# trigger-specific templating")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.[trigger].template.subject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("[custom subject line]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.[trigger].template.file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("[path to template file]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.[trigger].template.log.formatted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true/false (if true, prefix log lines with context information)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# project and job specific")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.[project].[jobname].template.subject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("[custom subject line]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.[project].[jobname].template.file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("[path to template file]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.[project].[jobname].template.log.formatted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true/false (if true, prefix log lines with context information)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# apply to any triggers not specified")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.template.subject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("[Default subject line]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.template.file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("[path to template file]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.template.log.formatted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true/false (if true, prefix log lines with context information)")]),t._v("\n")])])]),a("p",[t._v("If a template filepath ends with "),a("code",[t._v(".md")]),t._v(" or "),a("code",[t._v(".markdown")]),t._v(", then it will be interpreted as a Markdown formatted template. Otherwise it is expected that the template file contains HTML.")]),t._v(" "),a("p",[t._v("The Subject line, filepath, and file contents can all contain embedded property references of the form "),a("code",[t._v("${group.key}")]),t._v(". The available properties are mostly the same as those available for Notification Plugins, including the "),a("code",[t._v("execution.*")]),t._v(" and "),a("code",[t._v("job.*")]),t._v(" values. See "),a("router-link",{attrs:{to:"/developer/05-notification-plugins.html#execution-data"}},[t._v("Plugin Developer Guide - Notification Plugin - Execution Data")]),t._v(".")],1),t._v(" "),a("p",[t._v('The "Context Variables" values used within the execution are available just as they are in the execution, so options would be available as '),a("code",[t._v("${option.name}")]),t._v(".")]),t._v(" "),a("p",[t._v("In addition these properties are defined:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("rundeck.href")]),t._v(": URL to the Rundeck server")]),t._v(" "),a("li",[a("code",[t._v("notification.trigger")]),t._v(": Trigger name")]),t._v(" "),a("li",[a("code",[t._v("notification.eventStatus")]),t._v(': A string indicating the combination of execution status, and notification trigger, suitable for an email subject line, such as "KILLED", "FAILURE", "STARTING", "SUCCESS".')]),t._v(" "),a("li",[a("code",[t._v("execution.projectHref")]),t._v(": URL to the Project within Rundeck.")])]),t._v(" "),a("h4",{attrs:{id:"custom-attached-log-output-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-attached-log-output-file","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom Attached Log Output file")]),t._v(" "),a("p",[t._v("When the log output is attached as a file, the file's extension can be defined by adding new settings on rudeck-config.properties.\nFor example:")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.template.log.extension")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("html")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.template.log.contentType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("text/html")]),t._v("\n")])])]),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.<PROJECT>.<JOBNAME>.template.log.extension")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("csv")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.<PROJECT>.<JOBNAME>.template.log.contentType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("text/csv")]),t._v("\n")])])]),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.<TRIGGER>.template.log.extension")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("html")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.mail.<TRIGGER>.template.log.contentType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("text/html")]),t._v("\n")])])]),a("h2",{attrs:{id:"troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting","aria-hidden":"true"}},[t._v("#")]),t._v(" Troubleshooting")]),t._v(" "),a("p",[t._v("See the "),a("router-link",{attrs:{to:"/administration/maintenance/logs.html#service.log"}},[t._v("service.log")]),t._v(" for mail error messages.")],1)])},[],!1,null,null,null);e.default=n.exports}}]);