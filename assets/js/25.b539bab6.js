(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{362:function(t,e,a){t.exports=a.p+"assets/img/wh-routing-rule-overview.f5b191ec.png"},363:function(t,e,a){t.exports=a.p+"assets/img/wh-routing-rule-rule-overview.da54408e.png"},364:function(t,e,a){t.exports=a.p+"assets/img/wh-routing-rule-conditions-overview.5d01d245.png"},677:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"routing-run-job-enterprise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#routing-run-job-enterprise","aria-hidden":"true"}},[t._v("#")]),t._v(" Routing Run Job (Enterprise)")]),t._v(" "),s("div",{staticClass:"danger custom-block"},[s("p",[t._v("Webhooks and the Enterprise routing rule plugin are currently in beta.\nThere may be breaking API changes between releases!")])]),t._v(" "),s("p",[t._v("The powerful Enterprise Routing Rule webhook handler enables selective execution\nof one or more jobs based by evaluating event data.")]),t._v(" "),s("p",[t._v("Each event passes through one or more routing rules. If the event satisfies the rule\nconditions the target job will be executed with the supplied job options. Conditions and job\noptions can be constructed from event data!")]),t._v(" "),s("h2",{attrs:{id:"general-settings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#general-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" General Settings")]),t._v(" "),s("figure",[s("img",{attrs:{src:a(362),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"batch-key-optional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#batch-key-optional","aria-hidden":"true"}},[t._v("#")]),t._v(" Batch Key (optional)")]),t._v(" "),s("p",[t._v("The batch key makes it possible to extract a list from\nthe event and run each item through the rule processing.")]),t._v(" "),s("p",[s("strong",[t._v("Given:")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"messages"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msg"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msg"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("The batch key "),s("code",[t._v("$.messages")]),t._v(" could be used to process each item\nindividually.")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",[t._v("The batch key supports JsonPath deep scanning. A key\nsuch as "),s("code",[t._v("$.messages[*].alerts")]),t._v(" could be used to extract nested lists\nand process the items individually. Lists are recursively flattened.")])]),t._v(" "),s("h3",{attrs:{id:"event-id-key-optional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#event-id-key-optional","aria-hidden":"true"}},[t._v("#")]),t._v(" Event ID Key (optional)")]),t._v(" "),s("p",[t._v("The event ID key can be used to replace the ID auto generated when\nwebhook events are received. This will be reflected in the logs. Batches\nare extracted before applying the event ID key to each item.")]),t._v(" "),s("h2",{attrs:{id:"rules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rules","aria-hidden":"true"}},[t._v("#")]),t._v(" Rules")]),t._v(" "),s("figure",[s("img",{attrs:{src:a(363),alt:""}})]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",[t._v("Rules can be individually enabled/disabled!")])]),t._v(" "),s("p",[t._v("Each webhook event gets evaluated against each rule. If the rule matches\n(all conditions are satisfied) the target job will be executed.")]),t._v(" "),s("h3",{attrs:{id:"name-optional-but-srsly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#name-optional-but-srsly","aria-hidden":"true"}},[t._v("#")]),t._v(" Name (optional but srsly)")]),t._v(" "),s("p",[t._v("A label to identify the rule.")]),t._v(" "),s("h3",{attrs:{id:"debug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debug","aria-hidden":"true"}},[t._v("#")]),t._v(" Debug")]),t._v(" "),s("p",[t._v("Rule evaluation debug info can be printed to the "),s("code",[t._v("INFO")]),t._v(" log level by selecting the debug option. This can make it easier to troubleshoot rules while reducing noise.")]),t._v(" "),s("h3",{attrs:{id:"job"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#job","aria-hidden":"true"}},[t._v("#")]),t._v(" Job")]),t._v(" "),s("p",[t._v("Use the job picker to select a job target. If the rule evaluation is a match the target\njob will be executed with the Job Options.")]),t._v(" "),s("h3",{attrs:{id:"node-filter-optional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-filter-optional","aria-hidden":"true"}},[t._v("#")]),t._v(" Node Filter (optional)")]),t._v(" "),s("p",[t._v("Used to override the job node filter. You can use a "),s("a",{attrs:{href:"#jsonpath"}},[t._v("JsonPath")]),t._v(" or "),s("a",{attrs:{href:"#template"}},[t._v("Template")]),t._v(" to craft a node filter from the event data.")]),t._v(" "),s("h3",{attrs:{id:"user-optional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-optional","aria-hidden":"true"}},[t._v("#")]),t._v(" User (optional)")]),t._v(" "),s("p",[t._v("Optionally override the user the job runs as. This can be crafted from event data just\nlike "),s("a",{attrs:{href:"#node-filter"}},[t._v("Node Filter")])]),t._v(" "),s("h3",{attrs:{id:"job-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#job-options","aria-hidden":"true"}},[t._v("#")]),t._v(" Job Options")]),t._v(" "),s("p",[t._v("Job options to be supplied during job execution. Use "),s("a",{attrs:{href:"#jsonpath"}},[t._v("JsonPath")]),t._v(" or\n"),s("a",{attrs:{href:"#templates"}},[t._v("Templates")]),t._v(" to construct the "),s("code",[t._v("value")]),t._v(" from event data.")]),t._v(" "),s("h3",{attrs:{id:"conditions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conditions","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"#conditions"}},[t._v("Conditions")])]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"#conditions"}},[t._v("Conditions")])]),t._v(" "),s("h2",{attrs:{id:"conditions-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conditions-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Conditions")]),t._v(" "),s("figure",[s("img",{attrs:{src:a(364),alt:"Oh noes :O"}}),s("figcaption",[t._v("Oh noes ðŸ˜®")])]),t._v(" "),s("h3",{attrs:{id:"policy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#policy","aria-hidden":"true"}},[t._v("#")]),t._v(" Policy")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("all")]),t._v(" All conditions must match")]),t._v(" "),s("li",[s("strong",[t._v("any")]),t._v(" At least one condition must match")])]),t._v(" "),s("h3",{attrs:{id:"contains"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contains","aria-hidden":"true"}},[t._v("#")]),t._v(" contains")]),t._v(" "),s("p",[t._v("Satisfied if the value at "),s("code",[t._v("path")]),t._v(" contains the provided "),s("code",[t._v("value")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"datetimeafter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#datetimeafter","aria-hidden":"true"}},[t._v("#")]),t._v(" dateTimeAfter")]),t._v(" "),s("h3",{attrs:{id:"datetimebefore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#datetimebefore","aria-hidden":"true"}},[t._v("#")]),t._v(" dateTimeBefore")]),t._v(" "),s("div",{staticClass:"warning custom-block"},[s("p",[t._v("Must be a Date with Time.")])]),t._v(" "),s("p",[t._v("Compares the parsed Zoned DateTime at "),s("code",[t._v("path")]),t._v(" with the provided DateTime.\nSupported formats are:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_DATE_TIME",target:"_blank",rel:"noopener noreferrer"}},[t._v("ISO_DATE_TIME"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_INSTANT",target:"_blank",rel:"noopener noreferrer"}},[t._v("ISO_INSTANT"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Unix EPOCH (assumed to be in milliseconds if year >=2970)")])]),t._v(" "),s("p",[t._v("The format in the event need not match the format of the value.")]),t._v(" "),s("h3",{attrs:{id:"exists"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exists","aria-hidden":"true"}},[t._v("#")]),t._v(" exists")]),t._v(" "),s("p",[t._v("Satisfied if "),s("em",[t._v("Something")]),t._v(" exists at the specified path.")]),t._v(" "),s("h3",{attrs:{id:"matches"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#matches","aria-hidden":"true"}},[t._v("#")]),t._v(" matches")]),t._v(" "),s("p",[t._v("Matches is satisfied if the value at "),s("code",[t._v("path")]),t._v(" "),s("em",[t._v("equals")]),t._v(" the value of\nthe provided "),s("code",[t._v("value")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"isa"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isa","aria-hidden":"true"}},[t._v("#")]),t._v(" isA")]),t._v(" "),s("p",[t._v("Satisfied if the type at "),s("code",[t._v("path")]),t._v(" match a provided "),s("code",[t._v("value")]),t._v(" of:")]),t._v(" "),s("ul",[s("li",[t._v("string")]),t._v(" "),s("li",[t._v("number")]),t._v(" "),s("li",[t._v("map")]),t._v(" "),s("li",[t._v("list")]),t._v(" "),s("li",[t._v("null")])]),t._v(" "),s("h2",{attrs:{id:"jsonpath-templates"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsonpath-templates","aria-hidden":"true"}},[t._v("#")]),t._v(" JsonPath/Templates")]),t._v(" "),s("p",[t._v("Many fields accept a JsonPath or template string. The discriminating criteria are:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("JsonPath:")]),t._v(" Starts with "),s("code",[t._v("$")])]),t._v(" "),s("li",[s("strong",[t._v("Template:")]),t._v(" Starts with "),s("code",[t._v("\\$")]),t._v(" or "),s("code",[t._v("/^[^$]/")])])]),t._v(" "),s("h3",{attrs:{id:"jsonpath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsonpath","aria-hidden":"true"}},[t._v("#")]),t._v(" JsonPath")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",[t._v("A JsonPath that selects a data structure(list or map)\nwill return the data structure as serialized JSON.")])]),t._v(" "),s("p",[t._v("JsonPath allows for very flexible event data extraction.")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://github.com/json-path/JsonPath#path-examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("Path Examples"),s("OutboundLink")],1),t._v(" in the JsonPath\nrepo for easy examples and inspiration.")]),t._v(" "),s("h3",{attrs:{id:"template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template","aria-hidden":"true"}},[t._v("#")]),t._v(" Template")]),t._v(" "),s("p",[t._v("In a string template values are substituted with "),s("code",[t._v("${}")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Event data can be accessed in "),s("code",[t._v("${data}")]),t._v(":"),s("br"),t._v(" "),s("code",[t._v("The value is ${data.foo}")]),t._v(" -> "),s("code",[t._v("The value is bar")])]),t._v(" "),s("p",[t._v("JsonPath can be used too!:"),s("br"),t._v(" "),s("code",[t._v("The value is ${path('$.foo')}")]),t._v(" -> "),s("code",[t._v("The value is bar")])]),t._v(" "),s("h2",{attrs:{id:"faq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#faq","aria-hidden":"true"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),s("h3",{attrs:{id:"how-do-i-pass-the-raw-event-data-to-a-job"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-do-i-pass-the-raw-event-data-to-a-job","aria-hidden":"true"}},[t._v("#")]),t._v(" How do I pass the raw event data to a job?")]),t._v(" "),s("p",[t._v("You can use the "),s("a",{attrs:{href:"#jsonpath"}},[t._v("JsonPath")]),t._v(" "),s("code",[t._v("$.")]),t._v(" as a job option value to send the event as a serialized\nJSON. You can also send parts of the event by crafting a JsonPath that returns structured\ndata!")])])},[],!1,null,null,null);e.default=r.exports}}]);