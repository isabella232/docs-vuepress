(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{638:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"file-copier-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-copier-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" File Copier Plugin")]),t._v(" "),a("h2",{attrs:{id:"about"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about","aria-hidden":"true"}},[t._v("#")]),t._v(" About")]),t._v(" "),a("p",[t._v("A File Copier provider copies a file or script to a remote or local node.")]),t._v(" "),a("h2",{attrs:{id:"java-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-plugin-type","aria-hidden":"true"}},[t._v("#")]),t._v(" Java Plugin Type")]),t._v(" "),a("p",[t._v("Your provider class must implement the interface\n"),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/execution/service/FileCopier.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("FileCopier"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileCopier")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyFileStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                 "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStream")]),t._v(" input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                 "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("INodeEntry")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                 "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" destination"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileCopierException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                           "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("File")]),t._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                           "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("INodeEntry")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                           "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" destination"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileCopierException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyScriptContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("INodeEntry")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" destination"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileCopierException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("(Note: Change between Rundeck 2.7 and 2.8: File copier plugins now require implementation of "),a("code",[t._v("FileCopier")]),t._v(". Previously the "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/execution/service/DestinationFileCopier.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("DestinationFileCopier")]),a("OutboundLink")],1),t._v(" was required. Older methods of FileCopier have been removed from the interface.)")]),t._v(" "),a("p",[t._v("Optionally the plugin may implement "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/execution/service/MultiFileCopier.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MultiFileCopier"),a("OutboundLink")],1),t._v(" to more efficiently copy multiple files.")]),t._v(" "),a("h3",{attrs:{id:"plugin-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" Plugin properties")]),t._v(" "),a("p",[t._v("See "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-descriptions"}},[t._v("Plugin Development - Java Plugins - Descriptions")]),t._v("\nto learn how to create configuration properties for your plugin.")],1),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("The "),a("code",[t._v("destination")]),t._v(" parameter may or may not be specified. If it is not null, it indicates that the file must be copied to the requested destination filepath. If it is null, it indicates that the copied file is likely a script file, and it should be copied to a temporary file location. In either case, the resulting file path must be returned as the result of the method call.")])]),t._v(" "),a("h2",{attrs:{id:"script-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#script-plugin-type","aria-hidden":"true"}},[t._v("#")]),t._v(" Script Plugin Type")]),t._v(" "),a("p",[t._v("See the "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#script-plugin-development"}},[t._v("Script Plugin Development")]),t._v("\nfor the basics of developing script-based plugins for Rundeck.")],1),t._v(" "),a("h3",{attrs:{id:"additional-data-context-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#additional-data-context-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" Additional data context properties")]),t._v(" "),a("p",[t._v("The data context used in the script plugin definition can use these additional properties:")]),t._v(" "),a("dl",[a("dt",[a("code",[t._v("${file-copy.file}")])]),t._v(" "),a("dd",[t._v("The local path to the file that needs to be copied.")]),t._v(" "),a("dt",[a("code",[t._v("${file-copy.destination}")])]),t._v(" "),a("dd",[t._v("The remote destination path that is requested, if available.")])]),t._v(" "),a("h3",{attrs:{id:"provider-script-requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provider-script-requirements","aria-hidden":"true"}},[t._v("#")]),t._v(" Provider Script Requirements")]),t._v(" "),a("p",[t._v("The specific service has expectations about the way your provider script behaves:")]),t._v(" "),a("h4",{attrs:{id:"script-exit-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#script-exit-code","aria-hidden":"true"}},[t._v("#")]),t._v(" Script Exit Code")]),t._v(" "),a("ul",[a("li",[t._v("Exit code of 0 indicates success.")]),t._v(" "),a("li",[t._v("Any other exit code indicates failure.")])]),t._v(" "),a("h4",{attrs:{id:"script-output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#script-output","aria-hidden":"true"}},[t._v("#")]),t._v(" Script Output")]),t._v(" "),a("p",[t._v("The first line of output of "),a("code",[t._v("STDOUT")]),t._v(" MUST be the filepath of the file copied to the target node. Other output is ignored. All output to "),a("code",[t._v("STDERR")]),t._v(" will be captured for the job's output.")])])},[],!1,null,null,null);e.default=n.exports}}]);