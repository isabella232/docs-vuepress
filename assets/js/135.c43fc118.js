(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{613:function(e,t,a){"use strict";a.r(t);var n=a(0),o=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"log-filter-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log-filter-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" Log Filter Plugins")]),e._v(" "),a("h2",{attrs:{id:"about"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about","aria-hidden":"true"}},[e._v("#")]),e._v(" About")]),e._v(" "),a("p",[e._v("Log Filter plugins provide a way to process logging output from commands, scripts and other workflow step types. They can filter the output (remove, add, modify), or they can be used to capture or convert the output. They can also add metadata to the logs, or emit new log data.")]),e._v(" "),a("p",[e._v("Log Filter plugins implement the "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/logging/LogFilterPlugin.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("LogFilterPlugin"),a("OutboundLink")],1),e._v(" interface, and provider the "),a("code",[e._v("LogFilter")]),e._v(" service.")]),e._v(" "),a("h2",{attrs:{id:"behavior"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#behavior","aria-hidden":"true"}},[e._v("#")]),e._v(" Behavior")]),e._v(" "),a("p",[e._v("Users creating Workflows can configure Log Filter plugins within their workflow in two ways:")]),e._v(" "),a("ol",[a("li",[e._v("At the top level, applying to all steps in the workflow")]),e._v(" "),a("li",[e._v("At a step level, applying only to specific step(s).")])]),e._v(" "),a("h2",{attrs:{id:"java-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-plugin-type","aria-hidden":"true"}},[e._v("#")]),e._v(" Java Plugin Type")]),e._v(" "),a("ul",[a("li",[a("em",[e._v("Note")]),e._v(": Refer to "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#java-plugin-development"}},[e._v("Java Development")]),e._v(" for information about developing a Java plugin for Rundeck.")],1)]),e._v(" "),a("p",[e._v("The plugin interface is "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/logging/LogFilterPlugin.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("LogFilterPlugin"),a("OutboundLink")],1),e._v(". You can use the "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/logging/PluginLoggingContext.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("PluginLoggingContext"),a("OutboundLink")],1),e._v(" to get the data context and add data to it via the Output context.")]),e._v(" "),a("p",[e._v("When the top level, or step level is ready, all configured Log Filter plugins will be initialized using the optional "),a("code",[e._v("init")]),e._v(" method.")]),e._v(" "),a("p",[e._v("For each log event emitted within the configured level, each configured Log Filter plugin will have its "),a("code",[e._v("handleEvent")]),e._v(" method called, in order,\nwith a "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/logging/LogEventControl.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("LogEventControl"),a("OutboundLink")],1),e._v(" instance. The LogEventControl can be used to get or modify the content of the "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/logging/LogEvent.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("LogEvent"),a("OutboundLink")],1),e._v(" (message, type, level, metadata).\nIt can also control how the log event is handled:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("emit")]),e._v(": the log should be emitted")]),e._v(" "),a("li",[a("code",[e._v("quell")]),e._v(": the log should be futher processed, but not emitted in the final log")]),e._v(" "),a("li",[a("code",[e._v("quiet")]),e._v(": the final loglevel should be set to VERBOSE")]),e._v(" "),a("li",[a("code",[e._v("remove")]),e._v(": the log event should not be processed further")])]),e._v(" "),a("h3",{attrs:{id:"groovy-logfilter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#groovy-logfilter","aria-hidden":"true"}},[e._v("#")]),e._v(" Groovy LogFilter")]),e._v(" "),a("p",[e._v("Create a groovy script that calls the "),a("code",[e._v("rundeckPlugin")]),e._v(" method and passes the "),a("code",[e._v("LogFilterPlugin")]),e._v(" as the type of plugin:")]),e._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("dtolabs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("rundeck"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("logging")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("LogFilterPlugin")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rundeckPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("LogFilterPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//plugin definition")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("To define metadata about your plugin, and configuration properties, see the "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#groovy-plugin-development"}},[e._v("Plugin Development - Groovy Plugin Development")]),e._v(" chapter.")],1),e._v(" "),a("p",[e._v("The "),a("code",[e._v("LogFilterPlugin")]),e._v(" Groovy DLS supports these closure definitions:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("init")]),e._v(" initialization for the plugin (optional)")]),e._v(" "),a("li",[a("code",[e._v("handleEvent")]),e._v(" handle a log event (required)")]),e._v(" "),a("li",[a("code",[e._v("complete")]),e._v(" complete the log filter processing after all events have been handled (optional)")])]),e._v(" "),a("p",[e._v("Closure descriptions:")]),e._v(" "),a("p",[a("code",[e._v("init")])]),e._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n * Called to initialization the plugin with the context\n */")]),e._v("\ninit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("PluginLoggingContext")]),e._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Map")]),e._v(" configuration "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("->")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//perform initialization")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[a("code",[e._v("handleEvent")])]),e._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n * Called to initialization the plugin with the context\n */")]),e._v("\nhandleEvent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("PluginLoggingContext")]),e._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("LogEventControl")]),e._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Map")]),e._v(" configuration "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("->")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//handle the event")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[a("code",[e._v("complete")])]),e._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n * Called to complete the plugin processing\n */")]),e._v("\ncomplete "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("PluginLoggingContext")]),e._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Map")]),e._v(" configuration "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("->")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//finish")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"localization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localization","aria-hidden":"true"}},[e._v("#")]),e._v(" Localization")]),e._v(" "),a("p",[e._v("For the basics of plugin localization see: "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-localization"}},[e._v("Plugin Development - Plugin Localization")]),e._v(".")],1),e._v(" "),a("h2",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[e._v("#")]),e._v(" Example")]),e._v(" "),a("p",[e._v("Several built-in plugins are listed here:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/rundeck/rundeck/tree/master/rundeckapp/src/groovy/com/dtolabs/rundeck/server/plugins/logging",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("rundeckapp/src/groovy/com/dtolabs/rundeck/server/plugins/logging")]),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"example-groovy-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-groovy-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" Example Groovy plugins")]),e._v(" "),a("p",[e._v("See "),a("a",{attrs:{href:"https://github.com/rundeck/rundeck/tree/master/examples/example-groovy-log-filter-plugins",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/rundeck/rundeck/tree/master/examples/example-groovy-log-filter-plugins"),a("OutboundLink")],1),e._v(".")])])},[],!1,null,null,null);t.default=o.exports}}]);