(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{398:function(e,t,a){"use strict";a.r(t);var s=a(0),r=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"ruleset-workflow-strategy-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ruleset-workflow-strategy-plugin","aria-hidden":"true"}},[e._v("#")]),e._v(" Ruleset Workflow Strategy Plugin")]),e._v(" "),a("p",[e._v("The Ruleset Workflow Strategy Plugin (exclusive to Rundeck Enterprise) allows you to define a set of rules to describe when and if steps in the workflow should run.")]),e._v(" "),a("p",[e._v("The plugin can be selected in the Workflow Strategy list in the the Edit Job page.")]),e._v(" "),a("p",[e._v("The rules configuration value is a multiline block of text in the following format.")]),e._v(" "),a("h2",{attrs:{id:"rules-syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rules-syntax","aria-hidden":"true"}},[e._v("#")]),e._v(" Rules syntax")]),e._v(" "),a("p",[e._v("Rules define how each step should run. You can add one rule per-line. Rules are additive, and you can define multiple rules for each step.\nRules are in the form:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("STEP [directive] [conditions...]\n")])])]),a("p",[e._v("This indicates which step or steps the rule applies to, and any directives or conditions for the step.\nThe rule must have a directive or condition, or both.")]),e._v(" "),a("h3",{attrs:{id:"step"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step","aria-hidden":"true"}},[e._v("#")]),e._v(" Step")]),e._v(" "),a("p",[e._v("Specifies the step or steps that the rule applies to. You must include the [ and ] characters:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("[X]")]),e._v(": Applies to a single step, the named or numbered step X. You can use the step number, e.g. "),a("code",[e._v("[1]")]),e._v(" or the label, e.g. "),a("code",[e._v("[Deploy QA]")]),e._v(" (case sensitive).")]),e._v(" "),a("li",[a("code",[e._v("[X,Y,Z...]")]),e._v(": Applies to multiple steps. Separate multiple steps with a comma, e.g. "),a("code",[e._v("[1,2,3]")])]),e._v(" "),a("li",[a("code",[e._v("[1-3]")]),e._v(": Applies to steps 1 through 3")]),e._v(" "),a("li",[a("code",[e._v("[1-3,5-7]")]),e._v(": Applies to steps 1 through 3 and 5 through 7")]),e._v(" "),a("li",[a("code",[e._v("[*]")]),e._v(": Applies to all steps")])]),e._v(" "),a("h3",{attrs:{id:"directive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#directive","aria-hidden":"true"}},[e._v("#")]),e._v(" Directive")]),e._v(" "),a("p",[e._v("Directives optionally define when a step should start. You can define a directive rule for all steps "),a("code",[e._v("[*]")]),e._v(" using run-at-start or run-in-sequence.")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("run-at-start")]),e._v(": Run at workflow start time. The indicated steps will start immediately when the workflow starts.")]),e._v(" "),a("li",[a("code",[e._v("run-in-sequence")]),e._v(": Run after the previous step in sequence is run or is skipped.")]),e._v(" "),a("li",[a("code",[e._v("run-after:X[,Y[,Z..]]")]),e._v(": Run after one or more steps run or are skipped.")])]),e._v(" "),a("h3",{attrs:{id:"conditions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conditions","aria-hidden":"true"}},[e._v("#")]),e._v(" Conditions")]),e._v(" "),a("p",[e._v("Conditions can define additional checks that must pass before a step can run, or determine when a step can be skipped. For example:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("if:expression")])]),e._v(" "),a("li",[a("code",[e._v("unless:expression")])])]),e._v(" "),a("p",[a("code",[e._v("expression")]),e._v(" defines a comparison or match that will be checked. Valid expressions are:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("key.name==string")]),e._v(": a context variable such as option.myoption has a certain value")]),e._v(" "),a("li",[a("code",[e._v("key.name!=string")]),e._v(": not-equal check")]),e._v(" "),a("li",[a("code",[e._v("key.name=~pattern")]),e._v(": regular expression match")]),e._v(" "),a("li",[a("code",[e._v("key.name!~pattern")]),e._v(": negative regular expression match")]),e._v(" "),a("li",[a("code",[e._v("!key.name")]),e._v(" context: variable is unset")]),e._v(" "),a("li",[a("code",[e._v("key.name>=number")]),e._v(": greater than or equal to check")]),e._v(" "),a("li",[a("code",[e._v("key.name<=number")]),e._v(": less than or equal to check")]),e._v(" "),a("li",[a("code",[e._v("key.name>number")]),e._v(": greater than check")]),e._v(" "),a("li",[a("code",[e._v("key.name<number")]),e._v(": less than check")])]),e._v(" "),a("blockquote",[a("p",[e._v("Note: Curly braces are not needed to reference context variable key names.")])]),e._v(" "),a("h2",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),a("p",[e._v("Run steps 2 and 5 only after step 1 is done:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[2,5] run-after:1\n")])])]),a("p",[e._v("Choose between 5 and 6 based on an option value:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[*] run-in-sequence\n[5] if:option.env==QA\n[6] unless:option.env==PRODUCTION\n")])])]),a("p",[e._v("Run step 1, then steps 2 and 3 in parallel, then step 4")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[2] run-after:1\n[3] run-after:1\n[4] run-after:2,3\n")])])])])},[],!1,null,null,null);t.default=r.exports}}]);