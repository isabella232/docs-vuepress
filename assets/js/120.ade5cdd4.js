(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{629:function(t,e,a){"use strict";a.r(e);var n=a(0),s=Object(n.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"workflow-step-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflow-step-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" Workflow Step Plugin")]),t._v(" "),a("h2",{attrs:{id:"about"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about","aria-hidden":"true"}},[t._v("#")]),t._v(" About")]),t._v(" "),a("p",[t._v("There are two types of steps in a workflow:")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("Node Steps")]),t._v(" - executed on multiple nodes\n"),a("ul",[a("li",[t._v("example: a command or script execution")])])]),t._v(" "),a("li",[a("strong",[t._v("Workflow Steps")]),t._v(" - only executes once in a workflow\n"),a("ul",[a("li",[t._v("example: a Job-Reference step")])])])]),t._v(" "),a("p",[t._v("When there are multiple Nodes to execute on, the Node Steps execute multiple\ntimes, although the Workflow Steps will execute only once. Workflow steps\nare always executed in order, so any sequence of steps will be completed\nbefore the next step is executed even if they run on multiple nodes or threads.")]),t._v(" "),a("p",[t._v("You can create a plugin to execute either type of step.")]),t._v(" "),a("h3",{attrs:{id:"use-cases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-cases","aria-hidden":"true"}},[t._v("#")]),t._v(" Use cases")]),t._v(" "),a("p",[t._v("There are several reasons to create a Step Plugin:")]),t._v(" "),a("ul",[a("li",[t._v("You want to take the set of nodes defined for a Job, and use them with some other batch processing system, such as another kind of remote dispatcher or orchestration tool, rather than executing commands on them directly.\n"),a("ul",[a("li",[t._v("You would implement a "),a("a",{attrs:{href:"#workflowstep-plugin"}},[t._v("WorkflowStep Plugin")]),t._v(" plugin which is provided with the set of Nodes")])])]),t._v(" "),a("li",[t._v("You want to interact with another system on a per-node basis, such as for updating or reporting the state of a Node or process, rather than executing a command on the node\n"),a("ul",[a("li",[t._v("You would implement a "),a("a",{attrs:{href:"#workflownodestep-plugin"}},[t._v("WorkflowNodeStep Plugin")])])])]),t._v(" "),a("li",[t._v("You want to wrap a command or script in a simplified user interface and have it executed remotely on nodes\n"),a("ul",[a("li",[t._v("You would implement a "),a("a",{attrs:{href:"#remotescriptnodestep-plugin"}},[t._v("RemoteScriptNodeStep Plugin")]),t._v(" which allows you to define a command or script and declare a custom set of input fields.")])])])]),t._v(" "),a("h2",{attrs:{id:"java-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-plugin-type","aria-hidden":"true"}},[t._v("#")]),t._v(" Java Plugin Type")]),t._v(" "),a("h2",{attrs:{id:"define-a-plugin-provider-class"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#define-a-plugin-provider-class","aria-hidden":"true"}},[t._v("#")]),t._v(" Define a plugin provider class")]),t._v(" "),a("p",[t._v("Refer to the "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#java-plugin-development"}},[t._v("Plugin Development - Java Plugins")]),t._v("\nsection for information about correct\ndefinition of a "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/plugins/Plugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Plugin"),a("OutboundLink")],1),t._v(" class, including packaging as a Jar and annotation.")],1),t._v(" "),a("p",[t._v("Be sure to use the "),a("code",[t._v("@Plugin")]),t._v(" annotation on your provider implementation class\nto let it be recognized by Rundeck (See "),a("router-link",{attrs:{to:"/developer/02-plugin-annotations.html"}},[t._v("Plugin Annotations")]),t._v(").")],1),t._v(" "),a("p",[t._v("Your "),a("code",[t._v("service")]),t._v(" name should be one of the\nthree listed below. The class\n"),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/ServiceNameConstants.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ServiceNameConstants"),a("OutboundLink")],1),t._v(" contains static definitions of all Rundeck Service names.")]),t._v(" "),a("h2",{attrs:{id:"workflow-step-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflow-step-types","aria-hidden":"true"}},[t._v("#")]),t._v(" Workflow Step Types")]),t._v(" "),a("p",[t._v("Your plugins can be one of three types.")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#workflowstep-plugin"}},[t._v("WorkflowStep")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#workflownodestep-plugin"}},[t._v("WorkflowNodeStep")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#remotescriptnodestep-plugin"}},[t._v("RemoteScriptNodeStep")])])]),t._v(" "),a("p",[t._v("Each plugin type has an associated Java interface.")]),t._v(" "),a("h3",{attrs:{id:"plugin-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" Plugin properties")]),t._v(" "),a("p",[t._v("See "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-descriptions"}},[t._v("Plugin Development - Java Plugins - Descriptions")]),t._v("\nto learn how to create configuration properties for your plugin using Java annotations.")],1),t._v(" "),a("h3",{attrs:{id:"workflowstep-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflowstep-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" WorkflowStep Plugin")]),t._v(" "),a("p",[t._v("Annotate your class with "),a("code",[t._v("@Plugin")]),t._v(" and use the service name "),a("code",[t._v("WorkflowStep")]),t._v(".")]),t._v(" "),a("p",[t._v("Implement the interface "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/step/StepPlugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("StepPlugin"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n  * Execute the step.\n  *\n  * @param context       the plugin step context\n  * @param configuration Any configuration property values not otherwise applied to the plugin\n  *\n  * @throws StepException if an error occurs, the failureReason should indicate the reason\n  */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeStep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PluginStepContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StepException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Your implementation should throw a "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/execution/workflow/steps/node/NodeStepException.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("StepException"),a("OutboundLink")],1),t._v(" if an error occurs.")]),t._v(" "),a("h3",{attrs:{id:"workflownodestep-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflownodestep-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" WorkflowNodeStep Plugin")]),t._v(" "),a("p",[t._v("Annotate your class with "),a("code",[t._v("@Plugin")]),t._v(" and use the service name "),a("code",[t._v("WorkflowNodeStep")]),t._v(".")]),t._v(" "),a("p",[t._v("Implement the interface "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/step/NodeStepPlugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("NodeStepPlugin"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Execute the plugin step logic for the given node.\n *\n * @param context       the step context\n * @param configuration Any configuration property values not otherwise applied to the plugin\n * @param entry         the Node\n *\n * @throws NodeStepException if an error occurs\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeNodeStep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PluginStepContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                               "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                               "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("INodeEntry")]),t._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NodeStepException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Your implementation should throw a "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/core/execution/workflow/steps/node/NodeStepException.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("StepException"),a("OutboundLink")],1),t._v(" if an error occurs.")]),t._v(" "),a("h3",{attrs:{id:"remotescriptnodestep-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remotescriptnodestep-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" RemoteScriptNodeStep Plugin")]),t._v(" "),a("p",[t._v("These are a specialized use-case of the Node Step\nplugin. They allow you to simply define a command or a script that should be\nexecuted on the remote nodes, and Rundeck will handle the remote execution of the\ncommand/script via the appropriate services.")]),t._v(" "),a("p",[t._v("Annotate your class with "),a("code",[t._v("@Plugin")]),t._v(" and use the service name "),a("code",[t._v("RemoteScriptNodeStep")])]),t._v(" "),a("p",[t._v("Implement the interface "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/step/RemoteScriptNodeStepPlugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("RemoteScriptNodeStepPlugin"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Generate a full script or command string to execute on the remote node\n *\n * @param context       the step context\n * @param configuration Any configuration property values not otherwise applied to the plugin\n * @param entry         the Node\n *\n * @throws NodeStepException if an error occurs\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeneratedScript")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateScript")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PluginStepContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("INodeEntry")]),t._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NodeStepException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Your implementation should return a "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/step/GeneratedScript.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GeneratedScript"),a("OutboundLink")],1),t._v(" object. You can make use of the\n"),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/step/GeneratedScriptBuilder.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GeneratedScriptBuilder"),a("OutboundLink")],1),t._v(" class to generate the appropriate return type using these\ntwo factory methods:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Create a script\n *\n * @param script the script text\n * @param args   the arguments for the script\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeneratedScript")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Create a command\n *\n * @param command the command and arguments\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeneratedScript")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"step-context-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-context-information","aria-hidden":"true"}},[t._v("#")]),t._v(" Step context information")]),t._v(" "),a("p",[t._v("Each plugin is passed a "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/step/PluginStepContext.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("PluginStepContext"),a("OutboundLink")],1),t._v(" instance that provides access to\ndetails about the step and its configuration:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PluginStepContext")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Return the logger\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PluginLogger")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Return the project name\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFrameworkProject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Return the data context\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDataContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Return the nodes used for this execution\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("INodeSet")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNodes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Return the step number within the current workflow\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStepNumber")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Return the context path of step numbers within the larger workflow context.\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStepContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"example-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-code","aria-hidden":"true"}},[t._v("#")]),t._v(" Example code")]),t._v(" "),a("p",[t._v("See the source directory "),a("code",[t._v("examples/example-java-step-plugin")]),t._v(" for\nexamples of all three provider types.")]),t._v(" "),a("ul",[a("li",[t._v("On github: "),a("a",{attrs:{href:"https://github.com/rundeck/rundeck/tree/development/examples/example-java-step-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("example-java-step-plugin"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"script-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#script-plugin-type","aria-hidden":"true"}},[t._v("#")]),t._v(" Script Plugin Type")]),t._v(" "),a("p",[a("em",[t._v("Note:")]),t._v(" Currently these type of plugins can be implemented as script-based plugins:")]),t._v(" "),a("ul",[a("li",[t._v("Node Steps - the plugin will execute the script "),a("em",[t._v("locally")]),t._v(" on the Rundeck server for each node")]),t._v(" "),a("li",[t._v("Remote Script Node Steps - the plugin will execute the script "),a("em",[t._v("remotely")]),t._v(" on each node")])]),t._v(" "),a("p",[t._v("See the "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#script-plugin-development"}},[t._v("Script Plugin Development")]),t._v("\nfor the basics of developing script-based plugins for Rundeck.")],1),t._v(" "),a("p",[t._v("Use the service name for the plugin type:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("WorkflowNodeStep")])]),t._v(" "),a("li",[a("code",[t._v("RemoteScriptNodeStep")])])]),t._v(" "),a("p",[t._v("For configuration properties, see the "),a("router-link",{attrs:{to:"/developer/03-model-source-format-parser-generator-plugins.html"}},[t._v("Resource Model Source Plugin - Plugin Properties")]),t._v(".")],1),t._v(" "),a("p",[t._v("Two additional "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#provider-metadata"}},[t._v("provider metadata properties")]),t._v(" are available for "),a("code",[t._v("RemoteScriptNodeStep")]),t._v(" plugins:")],1),t._v(" "),a("ul",[a("li",[a("code",[t._v("use-original-extension")]),t._v(" - ("),a("code",[t._v("true/false")]),t._v(", default "),a("code",[t._v("true")]),t._v("), whether to force the remotely\ncopied script to have the same file extension as the original specified by "),a("code",[t._v("script-file")]),t._v(".")]),t._v(" "),a("li",[a("code",[t._v("script-file-extension")]),t._v(" - A file extension to use for the remotely copied script.")])]),t._v(" "),a("p",[t._v("To define "),a("router-link",{attrs:{to:"/developer/02-plugin-annotations.html#property-scopes"}},[t._v("property scopes")]),t._v(",\nadd a "),a("code",[t._v("scope")]),t._v(" entry in the map for a configuration property:")],1),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Integer\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" count\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Count\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Enter the number of nodes to generate\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Project\n")])])])])},[],!1,null,null,null);e.default=s.exports}}]);