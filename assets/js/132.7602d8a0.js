(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{517:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ui-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ui-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" UI Plugins")]),t._v(" "),a("h2",{attrs:{id:"about"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about","aria-hidden":"true"}},[t._v("#")]),t._v(" About")]),t._v(" "),a("p",[t._v("UI Plugins provide a way to include Javascript and CSS files\nin various parts of the Rundeck GUI's HTML pages.\nYou can define which pages of the GUI should include your plugin files,\nand use the Javascript and CSS to modify or add new features to the GUI.")]),t._v(" "),a("p",[t._v("UI Plugins that are installed are loaded on all applicable pages by default.")]),t._v(" "),a("p",[t._v("UI Plugins can either be packaged as Zip files or Java Jar files.\nThe simplest is to use a Zip plugin type.")]),t._v(" "),a("p",[t._v("Your Javascript can make use if a simple "),a("a",{attrs:{href:"#javascript-api"}},[t._v("Javascript API")]),t._v(" for additional features.")]),t._v(" "),a("h2",{attrs:{id:"behavior"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#behavior","aria-hidden":"true"}},[t._v("#")]),t._v(" Behavior")]),t._v(" "),a("p",[t._v("When Rundeck renders a page, it evaluates whether any UI plugins are applicable, and\nwhat resources of those plugins to load for the page. If some plugins declare that they "),a("code",[t._v("require")]),t._v("\nother plugins, the ordering is arranged to load required plugins first, if possible. Note: any plugin that you put in the "),a("code",[t._v("requires")]),t._v(" section must also be configured to load on the\nsame pages, otherwise Rundeck will not load it.")]),t._v(" "),a("p",[t._v("For Zip UI plugins Rundeck looks at the "),a("code",[t._v("plugin.yaml")]),t._v(" data which declares the page configurations to determine applicability. For Java plugins, Rundeck calls the "),a("code",[t._v("doesApply")]),t._v(" method.")]),t._v(" "),a("p",[t._v("When loading a plugin for the page, Rundeck will link to the script and stylesheets for the\npage. For Zip UI Plugins, the Page configuration determines which scripts and stylesheets\nto load. For Java plugins, the "),a("code",[t._v("scriptResourcesForPath")]),t._v(" and "),a("code",[t._v("styleResourcesForPath")]),t._v(" methods\nwill be called.")]),t._v(" "),a("p",[t._v("This is the list of available pages which can load UI plugins:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("menu/jobs")]),t._v(",")]),t._v(" "),a("li",[a("code",[t._v("menu/home")])]),t._v(" "),a("li",[a("code",[t._v("menu/projectHome")])]),t._v(" "),a("li",[a("code",[t._v("menu/executionMode")])]),t._v(" "),a("li",[a("code",[t._v("menu/projectExport")])]),t._v(" "),a("li",[a("code",[t._v("menu/projectImport")])]),t._v(" "),a("li",[a("code",[t._v("menu/projectDelete")])]),t._v(" "),a("li",[a("code",[t._v("menu/projectAcls")])]),t._v(" "),a("li",[a("code",[t._v("menu/editProjectAclFile")])]),t._v(" "),a("li",[a("code",[t._v("menu/createProjectAclFile")])]),t._v(" "),a("li",[a("code",[t._v("menu/saveProjectAclFile")])]),t._v(" "),a("li",[a("code",[t._v("menu/logStorage")])]),t._v(" "),a("li",[a("code",[t._v("menu/securityConfig")])]),t._v(" "),a("li",[a("code",[t._v("menu/acls")])]),t._v(" "),a("li",[a("code",[t._v("menu/editSystemAclFile")])]),t._v(" "),a("li",[a("code",[t._v("menu/createSystemAclFile")])]),t._v(" "),a("li",[a("code",[t._v("menu/saveSystemAclFile")])]),t._v(" "),a("li",[a("code",[t._v("menu/systemInfo")])]),t._v(" "),a("li",[a("code",[t._v("menu/systemConfig")])]),t._v(" "),a("li",[a("code",[t._v("menu/metrics")])]),t._v(" "),a("li",[a("code",[t._v("menu/plugins")])]),t._v(" "),a("li",[a("code",[t._v("menu/welcome")])]),t._v(" "),a("li",[a("code",[t._v("menu/storage")])]),t._v(" "),a("li",[a("code",[t._v("scheduledExecution/show")])]),t._v(" "),a("li",[a("code",[t._v("scheduledExecution/edit")])]),t._v(" "),a("li",[a("code",[t._v("scheduledExecution/delete")])]),t._v(" "),a("li",[a("code",[t._v("scheduledExecution/create")])]),t._v(" "),a("li",[a("code",[t._v("execution/show")])]),t._v(" "),a("li",[a("code",[t._v("framework/nodes")])]),t._v(" "),a("li",[a("code",[t._v("framework/adhoc")])]),t._v(" "),a("li",[a("code",[t._v("framework/createProject")])]),t._v(" "),a("li",[a("code",[t._v("framework/editProject")])]),t._v(" "),a("li",[a("code",[t._v("framework/editProjectConfig")])]),t._v(" "),a("li",[a("code",[t._v("framework/editProjectFile")])]),t._v(" "),a("li",[a("code",[t._v("scm/index")])]),t._v(" "),a("li",[a("code",[t._v("reports/index")])])]),t._v(" "),a("h2",{attrs:{id:"zip-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zip-plugin-type","aria-hidden":"true"}},[t._v("#")]),t._v(" Zip Plugin Type")]),t._v(" "),a("p",[t._v("See the "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#script-plugin-zip-structure"}},[t._v("Plugin Development - Script plugin zip structure")]),t._v("\nfor the basics of Zip plugin structure.")],1),t._v(" "),a("p",[t._v("The structure of the zip file is:")]),t._v(" "),a("pre",[a("code",[t._v("[name]-plugin.zip\n\\- [name]-plugin/ -- root directory of zip contents, same name as zip file\n   |- plugin.yaml -- plugin metadata file\n   \\- resources/  -- i18n resources, icons, (and for UI plugins: scripts/css)\n   \t  |- icon.png\n      |- i18n/\n      |  |- messages.properties\n      |  |- messages_es_419.properties\n      |  \\- ...\n      |- js/\n      |  |- myfile.js\n      |  \\- ...\n      \\- css/\n         |- mystyles.css\n         \\- ...\n")])]),t._v(" "),a("h3",{attrs:{id:"ui-plugin-provider-declaration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ui-plugin-provider-declaration","aria-hidden":"true"}},[t._v("#")]),t._v(" UI Plugin Provider Declaration")]),t._v(" "),a("p",[t._v("The following is required in the "),a("code",[t._v("providers:")]),t._v(" section of the "),a("code",[t._v("plugin.yaml")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yaml plugin metadata")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" plugin name\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" plugin version\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rundeckPluginVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("author")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" author name\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" release date (ISO8601)\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" website URL\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("providers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" UI\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("id\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugin-type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ui\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"My Plugin Title"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"My Plugin Description"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ui")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scripts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" js/my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("init.js\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" js/lib/some"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dependency.js\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" js/lib/my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("main.js\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("requires")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'some-other-provider'")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'some/path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("styles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" css/mystyles.css\n")])])]),a("p",[t._v("For a UI plugin, define a "),a("code",[t._v("service: UI")]),t._v(" and a "),a("code",[t._v("plugin-type: ui")]),t._v(".\n(The "),a("code",[t._v("providers")]),t._v(" section can also define other providers, of any type.)")]),t._v(" "),a("p",[t._v("For "),a("code",[t._v("name:")]),t._v(" use a unique provider ID for your plugin.")]),t._v(" "),a("p",[t._v("Within the "),a("code",[t._v("ui:")]),t._v(" section is a list of UI Plugin Page Configurations.")]),t._v(" "),a("p",[t._v("UI Plugin Page Configurations consist of:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("pages:")]),t._v(" A list of applicable Page paths. This can be a single path string, a list of paths, or a "),a("code",[t._v("*")]),t._v(" which will match all paths.")]),t._v(" "),a("li",[a("code",[t._v("scripts:")]),t._v(" A single file or list of files. These are relative to the "),a("code",[t._v("resources")]),t._v(" directory in your zip file.")]),t._v(" "),a("li",[a("code",[t._v("styles:")]),t._v(" A single file, or a list of files. Thes are relative to the "),a("code",[t._v("resources")]),t._v(" directory in your zip file.")]),t._v(" "),a("li",[a("code",[t._v("requires:")]),t._v(" A single or list of other UI plugin provider IDs.")])]),t._v(" "),a("p",[t._v("See "),a("a",{attrs:{href:"#javascript-api"}},[t._v("Javascript API")]),t._v(" for additional Javascript information.")]),t._v(" "),a("h3",{attrs:{id:"localization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localization","aria-hidden":"true"}},[t._v("#")]),t._v(" Localization")]),t._v(" "),a("p",[t._v("For the basics of zip plugin localization see: "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#internationalizationlocalization-for-zip-files"}},[t._v("Plugin Development - Internationalization/Localization for Zip files")]),t._v(".")],1),t._v(" "),a("h3",{attrs:{id:"icon"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#icon","aria-hidden":"true"}},[t._v("#")]),t._v(" Icon")]),t._v(" "),a("p",[t._v("See "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-icons"}},[t._v("Plugin Icons")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"java-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-plugin-type","aria-hidden":"true"}},[t._v("#")]),t._v(" Java Plugin Type")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("Refer to "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#java-plugin-development"}},[t._v("Java Development")]),t._v(" for information about developing a Java plugin for Rundeck.")],1)]),t._v(" "),a("p",[t._v("The plugin interface is "),a("a",{attrs:{href:"https://static.javadoc.io/org.rundeck/rundeck-core/3.1.0-20190731/com/dtolabs/rundeck/plugins/rundeck/UIPlugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("UIPlugin"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * @param path\n     *\n     * @return true if this plugin applies at the path\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doesApply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     *\n     * @param path\n     * @return list of resources available at the path\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resourcesForPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * @param path\n     *\n     * @return list of javascript resources to load at the path\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scriptResourcesForPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * @param path\n     *\n     * @return list of css stylesheets to load at the path\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("styleResourcesForPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * @param path\n     *\n     * @return list of plugin names this plugin depends on for the specified path\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("requires")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("The methods of the plugin are used as follows:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("doesApply")]),t._v(": should return "),a("code",[t._v("true")]),t._v(", if the plugin applies to the given path")]),t._v(" "),a("li",[a("code",[t._v("resourcesForPath")]),t._v(": return the list of resources for the given path")]),t._v(" "),a("li",[a("code",[t._v("scriptResourcesForPath")]),t._v(": return the list of Javascript resources for the path")]),t._v(" "),a("li",[a("code",[t._v("styleResourcesForPath")]),t._v(": return the list of CSS resources for the path")]),t._v(" "),a("li",[a("code",[t._v("requires")]),t._v(": return a list of other UI plugin names which this plugin requires, used to order the loading of plugin resources.")])]),t._v(" "),a("p",[t._v("Resources should be included in your plugin Jar file under a "),a("code",[t._v("resources/")]),t._v(" directory.")]),t._v(" "),a("h3",{attrs:{id:"localization-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localization-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Localization")]),t._v(" "),a("p",[t._v("For the basics of Java plugin localization see: "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-localization"}},[t._v("Plugin Development - Plugin Localization")])],1),t._v(" "),a("h3",{attrs:{id:"icon-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#icon-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Icon")]),t._v(" "),a("p",[t._v("See "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-icons"}},[t._v("Plugin Icons")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"javascript-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript-api","aria-hidden":"true"}},[t._v("#")]),t._v(" Javascript API")]),t._v(" "),a("p",[t._v("When loaded in a Rundeck GUI page, your Javascript code can use a simple Javascript API to\nget more information about the Rundeck application, and your plugin.")]),t._v(" "),a("p",[t._v("Note: Rundeck makes use of "),a("a",{attrs:{href:"https://knockoutjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Knockout"),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://jquery.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jQuery"),a("OutboundLink")],1),t._v(" on all GUI pages, so they can be used by your plugins. Knockout is useful to understand when interacting with the JS already included on a Rundeck page.")]),t._v(" "),a("p",[t._v("Rundeck creates a window object called "),a("code",[t._v("rundeckPage")]),t._v(" with these methods:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("project()")]),t._v(": returns the name of the current project, if available")]),t._v(" "),a("li",[a("code",[t._v("path()")]),t._v(": the page path")]),t._v(" "),a("li",[a("code",[t._v("lang()")]),t._v(": current user locale and language code")]),t._v(" "),a("li",[a("code",[t._v("pluginBaseUrl(pluginId)")]),t._v(': returns the base URL for loading file resources for a plugin with provider ID "pluginId". Append a resources path to retrieve any plugin resource files.')]),t._v(" "),a("li",[a("code",[t._v("pluginBasei18nUrl(pluginId)")]),t._v(': returns the base URL for loading i18n resources for a plugin with provider ID "pluginId". Append a resources path to retrieve i18n resources.')])]),t._v(" "),a("p",[t._v("Note: the "),a("code",[t._v("rundeckPage")]),t._v(" object may have other methods, but any methods not documented here are subject to change.")]),t._v(" "),a("h3",{attrs:{id:"loading-resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loading-resources","aria-hidden":"true"}},[t._v("#")]),t._v(" Loading resources")]),t._v(" "),a("p",[t._v("You can load other resources from your plugin by using the "),a("code",[t._v("pluginBaseUrl")]),t._v(" for your plugin.")]),t._v(" "),a("p",[t._v("Example using jQuery:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadHtmlTemplate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//assuming my zip plugin has a resources/html/myfile.html")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myProvider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.mycompany.rundeck.myplugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pluginUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rundeckPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pluginBaseUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fullUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pluginUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/html/'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    jQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fullUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do something with the HTML contents")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"loading-i18n-resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loading-i18n-resources","aria-hidden":"true"}},[t._v("#")]),t._v(" Loading i18n Resources")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("rundeckPage.pluginBasei18nUrl(..)")]),t._v(" method will return the base URL for loading i18n resources.")]),t._v(" "),a("p",[t._v("Rundeck Plugin Localization/Internationalization uses java "),a("code",[t._v(".properties")]),t._v(" formatted files. (See "),a("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-localization]"}},[t._v("Plugin Localization")]),t._v(". However, your i18n resources don't have to be "),a("code",[t._v(".properties")]),t._v(" files.")],1),t._v(" "),a("p",[t._v("Requesting resources via this URL provides two features to help with i18n:")]),t._v(" "),a("ol",[a("li",[t._v("Locale resolution. Requesting a path such as "),a("code",[t._v("rundeckPage.pluginBasei18nUrl('myprovider')+'/myfile.txt'")]),t._v(", will attempt to resolve the file by looking for a file based on the current User's locale/language settings. E.g. if their language is set to Spanish (code "),a("code",[t._v("es_419")]),t._v("), the request will resolve to a file "),a("code",[t._v("i18n/myfile_es_419.txt")]),t._v(" if it exists. It will fall back to the language (e.g. "),a("code",[t._v("es")]),t._v("), then any default locale (e.g. "),a("code",[t._v("en_us")]),t._v("), default language (e.g. "),a("code",[t._v("en")]),t._v(") and finally the original file path.")]),t._v(" "),a("li",[t._v("Conversion of Java .properties to JSON. If you request a "),a("code",[t._v(".properties")]),t._v(" file, and append a "),a("code",[t._v("?format=json")]),t._v(" to the URL, Rundeck will load the Java Properties formatted data, and return the JSON for the data.")])]),t._v(" "),a("p",[t._v("Examples:")]),t._v(" "),a("p",[t._v("Loads plugin i18n messages into the "),a("code",[t._v("window.Messages")]),t._v(" object.\nIf my zip plugin has a file "),a("code",[t._v("resources/i18n/messages_es_419.properties")]),t._v("\nand user's current lang is "),a("code",[t._v("es_419")]),t._v(", this would load the Spanish messages:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadi18nMessages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myProvider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.mycompany.rundeck.myplugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" plugini18nBase "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rundeckPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pluginBasei18nUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    jQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" plugini18nBase "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/messages.properties?format=json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Messages "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            jQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("This example is similar to the first example, but loads a HTML file specific to the Language/Locale of the user. If the locale is "),a("code",[t._v("es_419")]),t._v(" this would load the "),a("code",[t._v("resources/i18n/html/myfile_es_419.html")]),t._v(" file:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadi18nHtmlTemplate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myProvider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.mycompany.rundeck.myplugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" plugini18nBase "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rundeckPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pluginBasei18nUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fullUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" plugini18nBase "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/html/'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    jQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fullUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do something with the HTML contents")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"example-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" Example Plugin")]),t._v(" "),a("p",[t._v("Here are some "),a("a",{attrs:{href:"https://github.com/rundeck-plugins/ui-plugin-examples/",target:"_blank",rel:"noopener noreferrer"}},[t._v("UI Plugin Examples"),a("OutboundLink")],1),t._v(".")])])},[],!1,null,null,null);e.default=n.exports}}]);