(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{182:function(e,t,a){e.exports=a.p+"assets/img/aws-architecture.91f3cf14.png"},183:function(e,t,a){e.exports=a.p+"assets/img/aws-iam.cc79d8be.png"},184:function(e,t,a){e.exports=a.p+"assets/img/aws-iam-policy1.4595836a.png"},185:function(e,t,a){e.exports=a.p+"assets/img/aws-iam-policy2.ae8cfe9c.png"},186:function(e,t,a){e.exports=a.p+"assets/img/aws-sg.9f23d9ae.png"},187:function(e,t,a){e.exports=a.p+"assets/img/aws-sg-elb.689ed5e1.png"},188:function(e,t,a){e.exports=a.p+"assets/img/aws-sg-instances.53f5c5df.png"},189:function(e,t,a){e.exports=a.p+"assets/img/aws-sg-rds.4032bae4.png"},190:function(e,t,a){e.exports=a.p+"assets/img/aws-s3.b6cc6970.png"},191:function(e,t,a){e.exports=a.p+"assets/img/aws-s3-policy.6279660f.png"},192:function(e,t,a){e.exports=a.p+"assets/img/aws-rds.ad42c70f.png"},193:function(e,t,a){e.exports=a.p+"assets/img/aws-rds-advanced.6e639894.png"},194:function(e,t,a){e.exports=a.p+"assets/img/aws-ec2.b70a5b03.png"},195:function(e,t,a){e.exports=a.p+"assets/img/aws-ec2-iam.79d131f1.png"},196:function(e,t,a){e.exports=a.p+"assets/img/aws-ec2-sg.647febd3.png"},197:function(e,t,a){e.exports=a.p+"assets/img/aws-ec2-key.39887576.png"},198:function(e,t,a){e.exports=a.p+"assets/img/aws-elb.099dfc7d.png"},199:function(e,t,a){e.exports=a.p+"assets/img/aws-elb-sg.ba8b4df4.png"},200:function(e,t,a){e.exports=a.p+"assets/img/aws-elb-ec2.a6cac2b3.png"},201:function(e,t,a){e.exports=a.p+"assets/img/aws-elb-stickiness.2a8a3f62.png"},202:function(e,t,a){e.exports=a.p+"assets/img/aws-elb-logs.175f6d3a.png"},487:function(e,t,a){"use strict";a.r(t);var s=a(0),r=Object(s.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"aws"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aws","aria-hidden":"true"}},[e._v("#")]),e._v(" AWS")]),e._v(" "),s("p",[e._v("This document provides instructions to install Rundeck Enterprise in an HA (cluster) configuration on AWS, taking advantage of ELB, RDS, and S3 for scale and availability.")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(182),alt:"Rundeck Enterprise HA architecture on AWS"}}),s("figcaption",[e._v("Rundeck Enterprise HA architecture on AWS")])]),e._v(" "),s("h2",{attrs:{id:"aws-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aws-setup","aria-hidden":"true"}},[e._v("#")]),e._v(" AWS Setup")]),e._v(" "),s("p",[e._v("This section describes the AWS environment setup needed before the Rundeck software can be installed.")]),e._v(" "),s("h3",{attrs:{id:"key-pair"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#key-pair","aria-hidden":"true"}},[e._v("#")]),e._v(" Key Pair")]),e._v(" "),s("p",[e._v("Create a key pair to access the Rundeck Enterprise EC2 instances, rundeckpro-ec2user. This key pair will be specified when it is time to launch the EC2 instances later on. This is also the key pair used to ssh to the EC2 instances.")]),e._v(" "),s("ul",[s("li",[e._v("Open the Amazon EC2 console at: "),s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/ec2/"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("Go to navigation panel of the AWS console, under NETWORK & SECURITY, choose Key Pairs.")]),e._v(" "),s("li",[e._v("Add the new key pair.")])]),e._v(" "),s("p",[e._v("For further information, see "),s("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"iam"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iam","aria-hidden":"true"}},[e._v("#")]),e._v(" IAM")]),e._v(" "),s("p",[e._v("Create a Role to allow the Rundeck EC2 and S3 plugins to access AWS API so we donâ€™t have to specify access and secret key strings.")]),e._v(" "),s("ul",[s("li",[e._v("Go to the AWS Management Console and open the IAM console at "),s("a",{attrs:{href:"https://console.aws.amazon.com/iam/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/iam/"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("In the navigation pane of the console, click Roles and then click Create New Role.")]),e._v(" "),s("li",[e._v("Add the role name: rundeckpro-ec2-instance-role")]),e._v(" "),s("li",[e._v("Attach the following policies: AmazonS3FullAccess, AmazonEc2ReadOnlyAccess")])]),e._v(" "),s("p",[s("img",{attrs:{src:a(183),alt:""}}),e._v(" "),s("img",{attrs:{src:a(184),alt:""}}),e._v(" "),s("img",{attrs:{src:a(185),alt:""}})]),e._v(" "),s("p",[e._v("For further information, see "),s("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"security-groups"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-groups","aria-hidden":"true"}},[e._v("#")]),e._v(" Security Groups")]),e._v(" "),s("p",[e._v("Several security groups are defined to manage network access between the layers of the Enterprise environment (ELB->RUNDECK-RDS).")]),e._v(" "),s("ul",[s("li",[e._v("Open the Amazon EC2 console at "),s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/ec2/"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("li",[e._v("In the navigation pane, choose Security Groups.")]),e._v(" "),s("li",[e._v("Choose Create Security Group.")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(186),alt:""}})]),e._v(" "),s("p",[e._v("Create the follow groups:")]),e._v(" "),s("p",[s("strong",[e._v("sg:rundeck-elb")])]),e._v(" "),s("p",[e._v("inbound:")]),e._v(" "),s("ul",[s("li",[e._v("type: http, protocol TCP, port: 80, source 0.0.0.0/0")]),e._v(" "),s("li",[e._v("type: https, protocol TCP, port 443, source 0.0.0.0/0")])]),e._v(" "),s("p",[e._v("outbound:")]),e._v(" "),s("ul",[s("li",[e._v("type: all, protocol: all, port: all, destination 0.0.0.0/0")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(187),alt:""}})]),e._v(" "),s("p",[s("strong",[e._v("sg:rundeck-instances")])]),e._v(" "),s("p",[e._v("inbound:")]),e._v(" "),s("ul",[s("li",[e._v("type: custom, protocol TCP, port: 4440, source sg:rundeck-elb")]),e._v(" "),s("li",[e._v("type: custom, protocol SSH, port: 20, source sg:rundeck-elb")])]),e._v(" "),s("p",[e._v("outbound:")]),e._v(" "),s("ul",[s("li",[e._v("type: all, protocol: all, port: all, destination 0.0.0.0/0")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(188),alt:""}})]),e._v(" "),s("p",[s("strong",[e._v("sg:rundeck-rds")])]),e._v(" "),s("p",[e._v("inbound:")]),e._v(" "),s("ul",[s("li",[e._v("type: mysql, protocol TCP, port: 3306, source: sg-rundeck-instances")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(189),alt:""}})]),e._v(" "),s("p",[e._v("For further information, see "),s("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html#creating-security-group",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html#creating-security-group"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"s3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#s3","aria-hidden":"true"}},[e._v("#")]),e._v(" S3")]),e._v(" "),s("p",[e._v("Create a folder in the S3 bucket to store logs called rundeckpro. You will specify this folder name when the pro software is installed.")]),e._v(" "),s("p",[e._v("Go into the AWS Management Console and open the Amazon S3 console at "),s("a",{attrs:{href:"https://console.aws.amazon.com/s3",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/s3"),s("OutboundLink")],1)]),e._v(" "),s("figure",[s("img",{attrs:{src:a(190),alt:""}})]),e._v(" "),s("p",[e._v("Set Policy:")]),e._v(" "),s("figure",[s("img",{attrs:{src:a(191),alt:""}})]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2012-10-17"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Statement"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Sid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"PublicReadGetObject"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Effect"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Allow"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Principal"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Action"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"s3:GetObject"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Resource"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"arn:aws:s3:::rundeckpro/*"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("For further information, see "),s("a",{attrs:{href:"http://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"rds"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rds","aria-hidden":"true"}},[e._v("#")]),e._v(" RDS")]),e._v(" "),s("p",[e._v('Create an RDS mysql instance, rundeck-rds and place it in the rundeck-rds security group. Specify a database named "rundeck". Note the name of the RDS hostname because it is needed for the Enterprise installation.')]),e._v(" "),s("ul",[s("li",[e._v("Go into the AWS Management Console and open the Amazon RDS console at "),s("a",{attrs:{href:"https://console.aws.amazon.com/rds",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/rds"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("In the top right corner of the AWS Management Console, select the region in which you want to create the DB instance.")]),e._v(" "),s("li",[e._v("In the navigation pane, click Instances.")]),e._v(" "),s("li",[e._v("Click Launch DB Instance to start the Launch DB Instance Wizard.")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(192),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("Complete the advanced settings:")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(193),alt:""}})]),e._v(" "),s("p",[e._v("For further information, see "),s("a",{attrs:{href:"http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_CreateInstance.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_CreateInstance.html"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"ec2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ec2","aria-hidden":"true"}},[e._v("#")]),e._v(" EC2")]),e._v(" "),s("p",[e._v("Create two EC2 instances for the Rundeck Enterprise cluster. Specify the following when launching the instance:")]),e._v(" "),s("ul",[s("li",[e._v("Open the Amazon EC2 console at https://console.aws.amazon.com/ec2/.")]),e._v(" "),s("li",[e._v("From the console dashboard, choose Launch Instance.")]),e._v(" "),s("li",[e._v("Select the AMI image: Amazon Linux AMI 2015.03.0 x86_64 HVM GP2")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(194),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("In the configure instance details, choose the IAM Role: rundeckpro-ec2-instance-role")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(195),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("In the configure Security-group, choose the rundeck-instances")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(196),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("Finally, add the key pair name: rundeckpro-ec2user")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(197),alt:""}})]),e._v(" "),s("p",[e._v("For further information, see "),s("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance_linux",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance_linux"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"elb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elb","aria-hidden":"true"}},[e._v("#")]),e._v(" ELB")]),e._v(" "),s("p",[e._v("Create the ELB called rundeckpro-ha-elb. If you defined the HTTPS listener, you must create a new SSL certificate. You will upload the SSL cert and key when defining the HTTPS listener.")]),e._v(" "),s("ul",[s("li",[e._v("Open the Amazon EC2 console at "),s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/ec2/"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("li",[e._v("From the navigation bar, select a region for your load balancers. Be sure to select the same region that you selected for your EC2 instances.")]),e._v(" "),s("li",[e._v("In the navigation pane, under LOAD BALANCING, click Load Balancers.")]),e._v(" "),s("li",[e._v("Click Create Load Balancer.")]),e._v(" "),s("li",[e._v("Define the listeners:\n"),s("ul",[s("li",[e._v("80 (HTTP) forwarding to 4440 (HTTP)")]),e._v(" "),s("li",[e._v("443 (HTTPS, required certificate: rundeckpro-cert) forwarding to 4440 (HTTP)")])])])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(198),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("Select the security group rundeck-elb")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(199),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("Add the two EC2 instances to the ELB.")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(200),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("Add Stickiness: cookieName='JSESSIONID'")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(201),alt:""}})]),e._v(" "),s("ul",[s("li",[e._v("Enable access logs: S3 Location: rdpro-logs")])]),e._v(" "),s("figure",[s("img",{attrs:{src:a(202),alt:""}})])])},[],!1,null,null,null);t.default=r.exports}}]);