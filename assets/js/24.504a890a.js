(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{365:function(a,e,t){a.exports=t.p+"assets/img/fig0610.066e6663.png"},366:function(a,e,t){a.exports=t.p+"assets/img/fig0611.d3892f91.png"},396:function(a,e,t){"use strict";t.r(e);var s=t(0),n=Object(s.a)({},function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commands","aria-hidden":"true"}},[a._v("#")]),a._v(" Commands")]),a._v(" "),s("p",[a._v("Sometimes the need to execute an arbitrary command comes up.\nYou might need to check a bunch of systems to find out if they\nare running correctly, see their load, check resources or perhaps\ncollect information.")]),a._v(" "),s("p",[a._v("You can execute commands via the GUI or using rundeck command line interface.")]),a._v(" "),s("h2",{attrs:{id:"using-the-gui"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-the-gui","aria-hidden":"true"}},[a._v("#")]),a._v(" Using the GUI")]),a._v(" "),s("p",[a._v("First go to the "),s("router-link",{attrs:{to:"/manual/06-commands.html"}},[a._v("Commands page")]),a._v(".")],1),a._v(" "),s("h3",{attrs:{id:"filter-nodes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter-nodes","aria-hidden":"true"}},[a._v("#")]),a._v(" Filter nodes")]),a._v(" "),s("p",[a._v('To filter the nodes type in an expression or choose a saved filter.\nBelow, the nodes tagged "www" are filtered:')]),a._v(" "),s("figure",[s("img",{attrs:{src:t(71),alt:"Anvils filtered list"}}),s("figcaption",[a._v("Anvils filtered list")])]),a._v(" "),s("p",[a._v("Filtering with tags provides an abstraction over hostnames\nand lets the administrator think about command execution using formalized\nclassifications. New nodes can be added, others decommissioned while\nothers given new purpose, and the procedures stay unchanged because\nthey are bound to the filtering criteria.\nWith tags that describe application role, commands can be targeted\nto specific sub sets of nodes without hard coding any\nhostnames.")]),a._v(" "),s("p",[a._v("This simple classification scheme will allow the developers and\nadministrators to share a common vocabulary when talking about the kinds\nof nodes supporting the Anvils application.")]),a._v(" "),s("h3",{attrs:{id:"execute-command"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#execute-command","aria-hidden":"true"}},[a._v("#")]),a._v(" Execute command")]),a._v(" "),s("p",[a._v('To execute a command, type in the command string in text field labeled "Command":')]),a._v(" "),s("figure",[s("img",{attrs:{src:t(365),alt:"Command page"}}),s("figcaption",[a._v("Command page")])]),a._v(" "),s("p",[a._v("The output will appear below:")]),a._v(" "),s("figure",[s("img",{attrs:{src:t(366),alt:"Command output"}}),s("figcaption",[a._v("Command output")])]),a._v(" "),s("h2",{attrs:{id:"using-the-cli"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-the-cli","aria-hidden":"true"}},[a._v("#")]),a._v(" Using the CLI")]),a._v(" "),s("p",[a._v("The "),s("a",{attrs:{href:"https://rundeck.github.io/rundeck-cli/",target:"_blank",rel:"noopener noreferrer"}},[a._v("rd adhoc"),s("OutboundLink")],1),a._v(" command provides a command line interface to run commands.")]),a._v(" "),s("h3",{attrs:{id:"filter-nodes-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter-nodes-2","aria-hidden":"true"}},[a._v("#")]),a._v(" Filter nodes")]),a._v(" "),s("p",[a._v("First, you must filter the nodes. The "),s("code",[a._v("rd nodes")]),a._v(" command uses filter flag: "),s("code",[a._v("-F")]),a._v(".")]),a._v(" "),s("p",[a._v("Here, the "),s("code",[a._v("tags")]),a._v(" keyword is used to include nodes tagged 'www':")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rd nodes -p anvils -F "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("tags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("www\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("www1.anvils.com www2.anvils.com\n")])])]),s("p",[a._v('List the nodes tagged "app":')]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rd nodes -p anvils -F "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("tags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("app\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("app1.anvils.com app2.anvils.com\n")])])]),s("p",[a._v("Use the "),s("code",[a._v("+")]),a._v(" (AND) operator to list the web and app nodes:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rd nodes -p anvils -F "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("tags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("www+app\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("www1.anvils.com www2.anvils.com app1.anvils.com app2.anvils.com\n")])])]),s("p",[a._v("Exclude the web and app nodes:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rd nodes -p anvils -F "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'!tags=www+app'")]),a._v("\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db1.anvils.com\n")])])]),s("h3",{attrs:{id:"execute-command-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#execute-command-2","aria-hidden":"true"}},[a._v("#")]),a._v(" Execute command")]),a._v(" "),s("p",[a._v("Use "),s("code",[a._v("rd adhoc")]),a._v(" to execute adhoc commands and scripts.")]),a._v(" "),s("p",[a._v("Specify the command string you wish to execute on the filtered node set after the "),s("code",[a._v("--")]),a._v(".\nBelow the "),s("code",[a._v("id")]),a._v(" command is dispatched:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rd adhoc -p anvils -F "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("tags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("www -- "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v("\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# Immediate execution scheduled (148)\n148 running 2016-11-3017:21:10-0800 - http://madmartigan.local:4440/project/deps/execution/show/148 adhoc whoami\n")])])]),s("p",[a._v("Typically, you will want to see the output from the running command.\nAdd the --follow flag to see the output.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rd adhoc -p anvils --follow -F "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("tags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("www -- "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("whoami")]),a._v("\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# Started execution 147 running 2016-11-3017:20:43-0800 - http://madmartigan.local:4440/project/deps/execution/show/147 adhoc whoami\ngreg\n")])])])])},[],!1,null,null,null);e.default=n.exports},71:function(a,e,t){a.exports=t.p+"assets/img/fig0602.86924b93.png"}}]);