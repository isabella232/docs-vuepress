(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{644:function(t,e,a){"use strict";a.r(e);var n=a(0),s=Object(n.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"rundeck-sso-security-enterprise-only"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rundeck-sso-security-enterprise-only","aria-hidden":"true"}},[t._v("#")]),t._v(" Rundeck SSO Security (Enterprise Only)")]),t._v(" "),a("h2",{attrs:{id:"okta"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#okta","aria-hidden":"true"}},[t._v("#")]),t._v(" Okta")]),t._v(" "),a("p",[t._v("Rundeck Enterprise can be configured to work with the Okta security platfom.")]),t._v(" "),a("p",[t._v("To configure the Okta SSO plugin for your Rundeck installation\nyou will need to add a new application to your Okta Applications,\nand then add some properties to your rundeck-config.properties file.")]),t._v(" "),a("h3",{attrs:{id:"okta-application-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#okta-application-configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Okta Application Configuration")]),t._v(" "),a("p",[t._v("Log into your Okta web portal and configure a new application.")]),t._v(" "),a("ul",[a("li",[t._v("Create a new web application.\n"),a("ul",[a("li",[t._v('Configure the application with "Authorization Code" Grant type allowed.')]),t._v(" "),a("li",[t._v("Add the following URL to "),a("code",[t._v("Login Redirect URIs")]),t._v(" (you can add more than one):\n"),a("code",[t._v("<rundeck base url>/user/oauth/okta")]),t._v(". Example: "),a("code",[t._v("http://localhost:4440/user/oauth/okta")])]),t._v(" "),a("li",[t._v("Copy the Client ID and Client Secret provided by Okta so that you can use them for the rundeck configuration.")])])]),t._v(" "),a("li",[t._v("Create groups with the same name as the roles configured on Rundeck. Map users to those groups.")]),t._v(" "),a("li",[t._v("Under the API menu, open the Authorization Servers configuration and add a new claim with the following information:\n"),a("ul",[a("li",[t._v("Name: groups")]),t._v(" "),a("li",[t._v("Include in Token Type: "),a("code",[t._v("ID Token")]),t._v(" with "),a("code",[t._v("Userinfo/id_token_request")])]),t._v(" "),a("li",[t._v("Value Types: "),a("code",[t._v("Groups")])]),t._v(" "),a("li",[t._v("Filter: Regex: "),a("code",[t._v(".*")])])])])]),t._v(" "),a("h3",{attrs:{id:"rundeck-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rundeck-configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Rundeck configuration")]),t._v(" "),a("p",[t._v("Once you've set up the application in Okta you can configure Rundeck to use that\napplication.")]),t._v(" "),a("p",[t._v("Add the following properties to your rundeck-config.properties file:")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Enable the OAuth SSO feature")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#The first two come from the Client Credentials section on your Application configuration page in Okta")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.okta.clientId")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("(Okta Client ID)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.okta.clientSecret")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("(Okta Secret Key)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#This group of properties requires you to replace the <okta service url> with the url provided by Okta for making api authorization calls")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<okta service url> might look something like: https://dev-877856.oktapreview.com/oauth2/default")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#In your Okta web portal check API/Authorization Servers/Settings/Issuer to get this value")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.okta.accessTokenUri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("<okta service url>/v1/token")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.okta.userAuthorizationUri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("<okta service url>/v1/authorize")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.okta.userInfoUri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("<okta service url>/v1/userinfo")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Copy These verbatim")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.okta.clientAuthenticationScheme")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("form")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.okta.scope")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("openid profile email")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#These properties control the appearance and url of the button on the login page")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.sso.loginButton.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.sso.loginButton.title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("Login with Okta")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.sso.loginButton.url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("oauth/okta")]),t._v("\n")])])]),a("p",[t._v("After completing the configuration of your rundeck-config.properties file, restart Rundeck.")]),t._v(" "),a("h3",{attrs:{id:"sso-login"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sso-login","aria-hidden":"true"}},[t._v("#")]),t._v(" SSO Login")]),t._v(" "),a("p",[t._v("If you have successfully configured Okta and Rundeck you will see a new button\non the rundeck login page that says "),a("em",[t._v("Login with Okta")]),t._v(". By clicking this button\nyou will be redirected to an Okta Login form that will be used to collect the user credentials.\nOnce you have logged in with your Okta credentials you will be redirected back to the home\nmenu page in Rundeck.")]),t._v(" "),a("p",[t._v("Congratulations, you now have a working Okta/Rundeck SSO setup.")]),t._v(" "),a("h3",{attrs:{id:"okta-group-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#okta-group-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" Okta Group Plugin")]),t._v(" "),a("p",[t._v("If you have Active Directory integrated into your Okta system, the setup for groups described above may not work. In this case you\nmay configure the Okta user group plugin that is packaged with Rundeck, to pull the user's group information from Okta via the Okta API.")]),t._v(" "),a("p",[t._v("First, you will need to create an API key in Okta that you can use to make API requests.")]),t._v(" "),a("p",[t._v("Then you will need to add the following properties to your "),a("code",[t._v("framework.properties")]),t._v(" file.")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("framework.plugin.UserGroupSource.OktaGroupSource.apiToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("<api key>")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("framework.plugin.UserGroupSource.OktaGroupSource.oktaHostName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("<okta host name>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#example:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#framework.plugin.UserGroupSource.OktaGroupSource.oktaHostName=dev-877856.oktapreview.com")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("framework.plugin.UserGroupSource.OktaGroupSource.includedGroupTypes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("APP_GROUP")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#APP_GROUP is the way Okta denotes AD groups, if you want to also include Okta groups")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#you could do the following:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#framework.plugin.UserGroupSource.OktaGroupSource.includedGroupTypes=APP_GROUP,OKTA_GROUP")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("framework.plugin.UserGroupSource.OktaGroupSource.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n")])])]),a("p",[t._v("If the plugin is enabled, when the user logs in, it will attempt to use the Okta user id out of the SSO token to pull that user's groups from Okta.")]),t._v(" "),a("h2",{attrs:{id:"ping"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ping","aria-hidden":"true"}},[t._v("#")]),t._v(" Ping")]),t._v(" "),a("p",[t._v("Rundeck can be configured to work with Ping Identity services.")]),t._v(" "),a("h3",{attrs:{id:"ping-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ping-configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Ping Configuration")]),t._v(" "),a("p",[t._v("You will need to refer to the Ping documentation to set up an OpenId Connect(OIDC) application in your Ping Environment.\nThe Ping products you have purchased will determine how the application is set up inside Ping.")]),t._v(" "),a("h4",{attrs:{id:"ping-oidc-application-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ping-oidc-application-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" Ping OIDC Application Setup")]),t._v(" "),a("p",[t._v("When setting up the OIDC Application be sure to choose to generate a client secret, and choose the grant type: Authorization Code.\nThe Redirect callback url will be: "),a("code",[t._v("https://{your-rundeck-host}/user/oauth/ping")]),t._v(" (Ping requires this to be an https endpoint)\nSpecify the "),a("code",[t._v("openid")]),t._v(", "),a("code",[t._v("profile")]),t._v(", and "),a("code",[t._v("email")]),t._v(" scopes for the application.")]),t._v(" "),a("p",[a("em",[t._v("Note:")]),t._v(" The following Attribute Mappings must be set up in Ping on your OIDC Application.")]),t._v(" "),a("ul",[a("li",[t._v("The "),a("code",[t._v("sub")]),t._v(" property needs to map to the value that will be used to identify the user in Rundeck.")]),t._v(" "),a("li",[t._v("You will need to define a property mapping that will map the Ping user's groups to an attribute that is sent in the oauth token.")])]),t._v(" "),a("p",[t._v("After you have set up the OIDC application in Ping you will need the following properties when you set up the Rundeck side of the SSO:")]),t._v(" "),a("ul",[a("li",[t._v("Client Id")]),t._v(" "),a("li",[t._v("Client Secret")])]),t._v(" "),a("h3",{attrs:{id:"rundeck-configuration-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rundeck-configuration-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Rundeck Configuration")]),t._v(" "),a("p",[t._v("From the values you recorded above populate your "),a("code",[t._v("rundeck-config.properties")]),t._v(" file.")]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Enable the OAuth SSO feature")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.clientId")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("YOUR_CLIENT_ID_HERE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.clientSecret")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("YOUR_CLIENT_SECRET_HERE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.accessTokenUri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("\thttps://sso.connect.pingidentity.com/sso/as/token.oauth2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.userAuthorizationUri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("https://sso.connect.pingidentity.com/sso/as/authorization.oauth2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.userInfoUri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("\thttps://sso.connect.pingidentity.com/sso/idp/userinfo.openid")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.clientAuthenticationScheme")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("header")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.scope")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("openid profile email")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.principleKeys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("sub")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#The name of the attribute that hold's the users groups")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.security.oauth.ping.authorityProperty")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("YOUR_MAPPED_GROUPS_ATTRIBUTE")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#These properties control the appearance and url of the SSO login button on the login page")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.sso.loginButton.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.sso.loginButton.title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("Login with Ping")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rundeck.sso.loginButton.url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("oauth/ping")]),t._v("\n")])])]),a("p",[t._v("After completing the configuration, restart Rundeck and attempt to login with Ping.")])])},[],!1,null,null,null);e.default=s.exports}}]);